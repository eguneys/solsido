var Solsido=function(){"use strict";const e={};const t=Symbol("solid-proxy"),n={equals:(e,t)=>e===t};let r=null,i=T;const s={},o={owned:null,cleanups:null,context:null,owner:null};var a=null;let l=null,c=null,u=null,d=null,h=0;function f(e,t){const n=l,r=a,i=0===e.length?o:{owned:null,cleanups:null,context:null,owner:t||r};a=i,l=null;try{return $((()=>e((()=>P(i)))),!0)}finally{l=n,a=r}}function m(e,t){t=t?Object.assign({},n,t):n;const r={value:e,observers:null,observerSlots:null,pending:s,comparator:t.equals||void 0};return[S.bind(r),e=>("function"==typeof e&&(e=e(r.pending!==s?r.pending:r.value)),N(r,e))]}function p(e,t,n){A(C(e,t,!1,1))}function g(e,t,n){i=q;const r=C(e,t,!1,1);r.user=!0,d?d.push(r):queueMicrotask((()=>A(r)))}function b(e,t,r){r=r?Object.assign({},n,r):n;const i=C(e,t,!0,0);return i.pending=s,i.observers=null,i.observerSlots=null,i.comparator=r.equals||void 0,A(i),S.bind(i)}function v(e){let t,n=l;return l=null,t=e(),l=n,t}function y(e,t,n){const r=Array.isArray(e);let i,s=n&&n.defer;return n=>{let o;if(r){o=[];for(let t=0;t<e.length;t++)o.push(e[t]())}else o=e();if(s)return void(s=!1);const a=v((()=>t(o,i,n)));return i=o,a}}function _(e){return null===a||(null===a.cleanups?a.cleanups=[e]:a.cleanups.push(e)),e}function w(e){const t=Symbol("context");return{id:t,Provider:D(t),defaultValue:e}}function x(e){let t;return void 0!==(t=F(a,e.id))?t:e.defaultValue}function k(e){const t=b(e);return b((()=>B(t())))}function S(){if(this.sources&&this.state){const e=u;u=null,1===this.state?A(this):O(this),u=e}if(l){const e=this.observers?this.observers.length:0;l.sources?(l.sources.push(this),l.sourceSlots.push(e)):(l.sources=[this],l.sourceSlots=[e]),this.observers?(this.observers.push(l),this.observerSlots.push(l.sources.length-1)):(this.observers=[l],this.observerSlots=[l.sources.length-1])}return this.value}function N(e,t,n){if(e.comparator&&e.comparator(e.value,t))return t;if(c)return e.pending===s&&c.push(e),e.pending=t,t;let r=!1;return e.value=t,e.observers&&e.observers.length&&$((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];r,n.state||(n.pure?u.push(n):d.push(n),n.observers&&j(n)),n.state=1}if(u.length>1e6)throw u=[],new Error}),!1),t}function A(e){if(!e.fn)return;P(e);const t=a,n=l,r=h;l=a=e,function(e,t,n){let r;try{r=e.fn(t)}catch(e){E(e)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?N(e,r):e.value=r,e.updatedAt=n)}(e,e.value,r),l=n,a=t}function C(e,t,n,r=1,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:a,context:null,pure:n};return null===a||a!==o&&(a.owned?a.owned.push(s):a.owned=[s]),s}function M(e){if(0===e.state)return;if(2===e.state)return O(e);if(e.suspense&&v(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<h);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(1===(e=t[n]).state)A(e);else if(2===e.state){const n=u;u=null,O(e,t[0]),u=n}}function $(e,t){if(u)return e();let n=!1;t||(u=[]),d?n=!0:d=[],h++;try{return e()}catch(e){E(e)}finally{!function(e){u&&(T(u),u=null);if(e)return;d.length?function(e){if(c)return e();let t;const n=c=[];try{t=e()}finally{c=null}$((()=>{for(let e=0;e<n.length;e+=1){const t=n[e];if(t.pending!==s){const e=t.pending;t.pending=s,N(t,e)}}}),!1)}((()=>{i(d),d=null})):d=null}(n)}}function T(e){for(let t=0;t<e.length;t++)M(e[t])}function q(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:M(r)}const r=e.length;for(t=0;t<n;t++)M(e[t]);for(t=r;t<e.length;t++)M(e[t])}function O(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];r.sources&&(1===r.state?r!==t&&M(r):2===r.state&&O(r,t))}}function j(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=2,n.pure?u.push(n):d.push(n),n.observers&&j(n))}}function P(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),i=t.observerSlots.pop();n<r.length&&(e.sourceSlots[i]=n,r[n]=e,t.observerSlots[n]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)P(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function E(e){const t=r&&F(a,r);if(!t)throw e;t.forEach((t=>t(e)))}function F(e,t){return e?e.context&&void 0!==e.context[t]?e.context[t]:F(e.owner,t):void 0}function B(e){if("function"==typeof e&&!e.length)return B(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=B(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function D(e){return function(t){let n;var r;return A(C((()=>n=v((()=>(a.context={[e]:t.value},k((()=>t.children)))))),r,!0,1)),n}}const L=Symbol("fallback");function z(e){for(let t=0;t<e.length;t++)e[t]()}function I(e,t){return v((()=>e(t)))}function G(){return!0}const R={get:(e,n,r)=>n===t?r:e.get(n),has:(e,t)=>e.has(t),set:G,deleteProperty:G,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:G,deleteProperty:G}),ownKeys:e=>e.keys()};function V(e){return"function"==typeof e?e():e}function Z(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=V(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in V(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(V(e[n])));return[...new Set(t)]}},R)}function U(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r=[],i=[],s=[],o=0,a=t.length>1?[]:null;return _((()=>z(s))),()=>{let l,c,u=e()||[];return v((()=>{let e,t,h,m,p,g,b,v,y,_=u.length;if(0===_)0!==o&&(z(s),s=[],r=[],i=[],o=0,a&&(a=[])),n.fallback&&(r=[L],i[0]=f((e=>(s[0]=e,n.fallback()))),o=1);else if(0===o){for(i=new Array(_),c=0;c<_;c++)r[c]=u[c],i[c]=f(d);o=_}else{for(h=new Array(_),m=new Array(_),a&&(p=new Array(_)),g=0,b=Math.min(o,_);g<b&&r[g]===u[g];g++);for(b=o-1,v=_-1;b>=g&&v>=g&&r[b]===u[v];b--,v--)h[v]=i[b],m[v]=s[b],a&&(p[v]=a[b]);for(e=new Map,t=new Array(v+1),c=v;c>=g;c--)y=u[c],l=e.get(y),t[c]=void 0===l?-1:l,e.set(y,c);for(l=g;l<=b;l++)y=r[l],c=e.get(y),void 0!==c&&-1!==c?(h[c]=i[l],m[c]=s[l],a&&(p[c]=a[l]),c=t[c],e.set(y,c)):s[l]();for(c=g;c<_;c++)c in h?(i[c]=h[c],s[c]=m[c],a&&(a[c]=p[c],a[c](c))):i[c]=f(d);i=i.slice(0,o=_),r=u.slice(0)}return i}));function d(e){if(s[c]=e,a){const[e,n]=m(c);return a[c]=n,t(u[c],e)}return t(u[c])}}}((()=>e.each),e.children,t||void 0))}function H(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r,i=[],s=[],o=[],a=[],l=0;return _((()=>z(o))),()=>{const c=e()||[];return v((()=>{if(0===c.length)return 0!==l&&(z(o),o=[],i=[],s=[],l=0,a=[]),n.fallback&&(i=[L],s[0]=f((e=>(o[0]=e,n.fallback()))),l=1),s;for(i[0]===L&&(o[0](),o=[],i=[],s=[],l=0),r=0;r<c.length;r++)r<i.length&&i[r]!==c[r]?a[r]((()=>c[r])):r>=i.length&&(s[r]=f(u));for(;r<i.length;r++)o[r]();return l=a.length=o.length=c.length,i=c.slice(0),s=s.slice(0,l)}));function u(e){o[r]=e;const[n,i]=m(c[r]);return a[r]=i,t(n,r)}}}((()=>e.each),e.children,t||void 0))}function X(e){let t=!1;const n=b((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return b((()=>{const r=n();if(r){const n=e.children;return(t="function"==typeof n&&n.length>0)?v((()=>n(r))):n}return e.fallback}))}function K(e){let t=!1;const n=k((()=>e.children)),r=b((()=>{let e=n();Array.isArray(e)||(e=[e]);for(let t=0;t<e.length;t++){const n=e[t].when;if(n)return[t,n,e[t]]}return[-1]}),void 0,{equals:(e,n)=>e[0]===n[0]&&(t?e[1]===n[1]:!e[1]==!n[1])&&e[2]===n[2]});return b((()=>{const[n,i,s]=r();if(n<0)return e.fallback;const o=s.children;return(t="function"==typeof o&&o.length>0)?v((()=>o(i))):o}))}function W(e){return e}let Y;function Q(t){let n;e.context&&e.load&&(n=e.load(e.context.id+e.context.count));const[i,s]=m(n);let o;return Y||(Y=new Set),Y.add(s),_((()=>Y.delete(s))),b((()=>{if(null!=(o=i())){const e=t.fallback;return"function"==typeof e&&e.length?v((()=>e(o,(()=>s(null))))):e}var e;return e=s,r||(r=Symbol("error")),null===a||(null===a.context?a.context={[r]:[e]}:a.context[r]?a.context[r].push(e):a.context[r]=[e]),t.children}))}const J=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),ee=new Set(["innerHTML","textContent","innerText","children"]),te={className:"class",htmlFor:"for"},ne={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},re=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),ie=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),se={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function oe(e,t){return b(e,void 0,t?void 0:{equals:t})}const ae="_$DX_DELEGATE";function le(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function ce(e,t=window.document){const n=t[ae]||(t[ae]=new Set);for(let r=0,i=e.length;r<i;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,be))}}function ue(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function de(e,t,n,r){r?Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n:Array.isArray(n)?e.addEventListener(t,(e=>n[0](n[1],e))):e.addEventListener(t,n)}function he(e,t,n={}){const r=e.style;if(null==t||"string"==typeof t)return r.cssText=t;let i,s;for(s in"string"==typeof n&&(n={}),n)null==t[s]&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function fe(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return ye(e,t,r,n);p((r=>ye(e,t(),r,n)),r)}function me(t){let n,r;return e.context&&(n=e.registry.get(r=function(){const t=e.context;return`${t.id}${t.count++}`}()))?(e.completed&&e.completed.add(n),e.registry.delete(r),n):t.cloneNode(!0)}function pe(e,t,n){const r=t.trim().split(/\s+/);for(let t=0,i=r.length;t<i;t++)e.classList.toggle(r[t],n)}function ge(e,t,n,r,i){let s,o,a;if("style"===t)return he(e,n,r);if("classList"===t)return function(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let s,o;for(s=0,o=i.length;s<o;s++){const r=i[s];r&&"undefined"!==r&&!t[r]&&(pe(e,r,!1),delete n[r])}for(s=0,o=r.length;s<o;s++){const i=r[s],o=!!t[i];i&&"undefined"!==i&&n[i]!==o&&o&&(pe(e,i,!0),n[i]=o)}return n}(e,n,r);if(n===r)return r;if("ref"===t)n(e);else if("on:"===t.slice(0,3))e.addEventListener(t.slice(3),n);else if("oncapture:"===t.slice(0,10))e.addEventListener(t.slice(10),n,!0);else if("on"===t.slice(0,2)){const r=t.slice(2).toLowerCase(),i=re.has(r);de(e,r,n,i),i&&ce([r])}else if((a=ee.has(t))||!i&&(ne[t]||(o=J.has(t)))||(s=e.nodeName.includes("-")))!s||o||a?e[ne[t]||t]=n:e[(l=t,l.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase())))]=n;else{const r=i&&t.indexOf(":")>-1&&se[t.split(":")[0]];r?function(e,t,n,r){null==r?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}(e,r,t,n):ue(e,te[t]||t,n)}var l;return n}function be(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n||document});null!==n;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(void 0!==i?r(i,e):r(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function ve(e,t,n={},r,i){return!i&&"children"in t&&p((()=>n.children=ye(e,t.children,n.children))),p((()=>function(e,t,n,r,i={}){for(const r in i)if(!(r in t)){if("children"===r)continue;ge(e,r,null,i[r],n)}for(const s in t){if("children"===s){r||ye(e,t.children);continue}const o=t[s];i[s]=ge(e,s,o,i[s],n)}}(e,t,r,!0,n))),n}function ye(t,n,r,i,s){for(e.context&&!r&&(r=[...t.childNodes]);"function"==typeof r;)r=r();if(n===r)return r;const o=typeof n,a=void 0!==i;if(t=a&&r[0]&&r[0].parentNode||t,"string"===o||"number"===o){if(e.context)return r;if("number"===o&&(n=n.toString()),a){let e=r[0];e&&3===e.nodeType?e.data=n:e=document.createTextNode(n),r=xe(t,r,i,e)}else r=""!==r&&"string"==typeof r?t.firstChild.data=n:t.textContent=n}else if(null==n||"boolean"===o){if(e.context)return r;r=xe(t,r,i)}else{if("function"===o)return p((()=>{let e=n();for(;"function"==typeof e;)e=e();r=ye(t,e,r,i)})),()=>r;if(Array.isArray(n)){const o=[];if(_e(o,n,s))return p((()=>r=ye(t,o,r,i,!0))),()=>r;if(e.context)for(let e=0;e<o.length;e++)if(o[e].parentNode)return r=o;if(0===o.length){if(r=xe(t,r,i),a)return r}else Array.isArray(r)?0===r.length?we(t,o,i):function(e,t,n){let r=n.length,i=t.length,s=r,o=0,a=0,l=t[i-1].nextSibling,c=null;for(;o<i||a<s;)if(t[o]!==n[a]){for(;t[i-1]===n[s-1];)i--,s--;if(i===o){const t=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],t)}else if(s===a)for(;o<i;)c&&c.has(t[o])||t[o].remove(),o++;else if(t[o]===n[s-1]&&n[a]===t[i-1]){const r=t[--i].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--s],r),t[i]=n[s]}else{if(!c){c=new Map;let e=a;for(;e<s;)c.set(n[e],e++)}const r=c.get(t[o]);if(null!=r)if(a<r&&r<s){let l,u=o,d=1;for(;++u<i&&u<s&&null!=(l=c.get(t[u]))&&l===r+d;)d++;if(d>r-a){const i=t[o];for(;a<r;)e.insertBefore(n[a++],i)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}else o++,a++}(t,r,o):(r&&xe(t),we(t,o));r=o}else if(n instanceof Node){if(e.context&&n.parentNode)return r=a?[n]:n;if(Array.isArray(r)){if(a)return r=xe(t,r,i,n);xe(t,r,null,n)}else null!=r&&""!==r&&t.firstChild?t.replaceChild(n,t.firstChild):t.appendChild(n);r=n}}return r}function _e(e,t,n){let r=!1;for(let i=0,s=t.length;i<s;i++){let s,o=t[i];if(o instanceof Node)e.push(o);else if(null==o||!0===o||!1===o);else if(Array.isArray(o))r=_e(e,o)||r;else if("string"==(s=typeof o))e.push(document.createTextNode(o));else if("function"===s)if(n){for(;"function"==typeof o;)o=o();r=_e(e,Array.isArray(o)?o:[o])||r}else e.push(o),r=!0;else e.push(document.createTextNode(o.toString()))}return r}function we(e,t,n){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function xe(e,t,n,r){if(void 0===n)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let r=!1;for(let s=t.length-1;s>=0;s--){const o=t[s];if(i!==o){const t=o.parentNode===e;r||s?t&&o.remove():t?e.replaceChild(i,o):e.insertBefore(i,n)}else r=!0}}else e.insertBefore(i,n);return[i]}function ke(t){const[n,r]=function(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=t.map((t=>{const n={};for(let i=0;i<t.length;i++){const s=t[i];Object.defineProperty(n,s,r[s]?r[s]:{get:()=>e[s],set:()=>!0})}return n}));return i.push(new Proxy({get:t=>n.has(t)?void 0:e[t],has:t=>!n.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!n.has(e)))},R)),i}(t,["component"]);return b((()=>{const t=n.component;switch(typeof t){case"function":return v((()=>t(r)));case"string":const n=ie.has(t),i=e.context?me():function(e,t=!1){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(t,n);return function(e,t,n,r){"function"==typeof t?p((i=>ve(e,t(),i,n,r))):ve(e,t,void 0,n,r)}(i,r,n),i}}))}const Se=le("<a></a>"),Ne=le("<div></div>"),Ae=[void 0,"","sound","music","learn","learn/preface","learn/introduction","learn/references"],Ce=[void 0,"internal","internal/svg"],Me=w();function $e(e){let t=qe(window.location.pathname);const[n,r]=m(t||function(e){let t=Ce.indexOf(e.replace(/^(\/)/,""));if(-1!==t)return t+10}(window.location.pathname)||1);let i=!1;g((()=>{n(),n()>10||!i&&window.history.pushState({},"","/"+Ae[n()])})),window.addEventListener("popstate",(()=>{let e=qe(window.location.pathname);i=!0,e&&r(e),i=!1}));const s=[n,{setRoute:r,home(){r(1)},sound(){r(2)},music(){r(3)},learn(){r(4)}}];return I(Me.Provider,{value:s,get children(){return e.children}})}function Te(){return x(Me)}function qe(e){let t=Ae.indexOf(e.replace(/^(\/)/,""));if(-1!==t)return t}const Oe=e=>{let{href:t,children:n,anchor:r}=e,[i,{setRoute:s}]=Te(),o=qe(t),a=e=>{if(e.preventDefault(),s(o),r){let e=document.getElementById(r);e&&e.scrollIntoView()}};return(()=>{const e=Se.cloneNode(!0);return e.$$click=a,ue(e,"href",t),fe(e,n),e})()},je=e=>{let{href:t,children:n}=e,[r,{setRoute:i}]=Te(),s=qe(t),o=e=>{e.preventDefault(),i(s)},a=()=>{if(r()===s)return"active"};return(()=>{const e=Ne.cloneNode(!0);return e.$$click=o,fe(e,n),p((()=>e.className=["link",a()].join(" "))),e})()};ce(["click"]);let Pe=/^[A-Za-z0-9\+\-;'\\\[\]]$/,Ee=/^(\s|Shift|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Backspace|Enter|Tab|\*)$/,Fe=/^(\!|\$)$/;function Be(e){return e.match(Pe)||e.match(Ee)||e.match(Fe)}class De{get left(){return this.btn("left")}get right(){return this.btn("right")}_btn=new Map;press=(e,t)=>{let n=t.ctrlKey,r=t.shiftKey;this._btn.has(e)?this._btn.get(e).just_pressed=!0:this._btn.set(e,{just_pressed:!0,just_released:!1,ctrl:n,shift:r,t:0,t0:0})};release=e=>{let t=this._btn.get(e);t&&(t.just_released=!0)};btn=(e,t,n)=>{let r=this._btn.get(e);return r&&!!t==!!r.shift?r.t:0};btn0=(e,t,n)=>{let r=this._btn.get(e);return r&&!!t==!!r.shift?r.t0:0};btnp=(e,t,n)=>this.btn(e,t,n)>0&&0===this.btn0(e,t,n);btnpp=e=>this._btnpp===e;update=(e,t)=>{this._btnpp=void 0;for(let[t,n]of this._btn)0===n.t&&(n.t0=n.t),(n.just_pressed||n.t>0)&&(n.t0=n.t,n.t+=e,n.just_pressed=!1),n.just_released&&(n.t0=n.t,n.t=0,n.just_released=!1,this._last_released&&this._last_released===t?(this._btnpp=t,this._last_released=void 0):this._last_released=t)};init(){let{press:e,release:t}=this;return document.addEventListener("keydown",(t=>{if(!t.ctrlKey&&Be(t.key))switch(t.preventDefault(),t.key){case"ArrowUp":e("up",t);break;case"ArrowDown":e("down",t);break;case"ArrowLeft":e("left",t);break;case"ArrowRight":e("right",t);break;default:e(t.key,t)}})),document.addEventListener("keyup",(e=>{if(!e.ctrlKey&&Be(e.key))switch(e.preventDefault(),e.key){case"ArrowUp":t("up");break;case"ArrowDown":t("down");break;case"ArrowLeft":t("left");break;case"ArrowRight":t("right");break;default:t(e.key)}})),this}}class Le{}const ze=w(),Ie=()=>x(ze),Ge=e=>{let t,[n,r]=m((new De).init(),{equals:!1}),[i,s]=m(new Le,{equals:!1}),o=1e3/60,a=o;requestAnimationFrame((function e(n){let i=t?n-t:o;i=Math.max(16.666666666666668,i),i=Math.min(33.333333333333336,i),r((e=>(e.update(i,a),e))),s((e=>(e.dt=i,e.dt0=a,e))),a=i,t=n,requestAnimationFrame(e)}));let l=[n,i];return I(ze.Provider,{value:l,get children(){return e.children}})};var Re={quarter_text:"",gclef:"",bclef:"",double_note:"",whole_note:"",half_note:"",quarter_note:"",flat_accidental:"",natural_accidental:"",sharp_accidental:"",dflat_accidental:"",dsharp_accidental:"",eighth_flag_down:"",sixteenth_flag_down:"",thirtysecond_flag_down:"",sixtyfourth_flag_down:"",eighth_flag_up:"",sixteenth_flag_up:"",thirtysecond_flag_up:"",sixtyfourth_flag_up:"",brace:"",double_rest:"",whole_rest:"",half_rest:"",quarter_rest:"",eighth_rest:"",sixteenth_rest:"",thirtysecond_rest:"",sixtyfourth_rest:"",onetwentyeighth_rest:"",zero_time:"",one_time:"",two_time:"",three_time:"",four_time:"",five_time:"",six_time:"",seven_time:"",eight_time:"",nine_time:"",ten_time:"",twelve_time:"",common_time:"",cut_time:""};const Ve=Ke(1,1,void 0,1),Ze=Ke(7,7,2,8);function Ue(e){return Ve<=e&&e<=Ze}function He(e){return e>=1&&e<=8}function Xe(e,t){return Ke(e[0],e[1],e[2],t)}function Ke(e,t,n,r){return e|t<<4|r<<8|(n||0)<<12}function We(e){return 15&e}function Ye(e){return(240&e)>>4}function Qe(e){return(3840&e)>>8}function Je(e){return(61440&e)>>12}function et(e,t){return 16*e+t}function tt(e){return Math.floor(e/16)}function nt(e){return e%16}function rt(e,t){return Math.max(1,8*Math.pow(2,nt(e)-t))}const it=ut(5),st=ut(10),ot=dt(7),at=dt(14);function lt(e,t){return dt(ft(e)+t)}function ct(e,t){return ut(ht(e)+t)}function ut(e){return e+1+35+1}function dt(e){return e+1}function ht(e){return e-35-2}function ft(e){return e-1}function mt(e){return e>35}function pt(e){if(mt(e)){let t=ht(e),n=Math.floor(t/5)+1,r=t%5+1;return r>2&&(r+=1),n+=2,[r,n,1]}{let t=ft(e),n=Math.floor(t/7)+1;return n+=2,[t%7+1,n,void 0]}}const gt=[0,10,60,90,120,180,220,400];class bt{get bpm(){return gt[this.tempo]}tempo_bm_s(e,t){let n=t/rt(e,_t(nt(e)));return 60/this.bpm*n}constructor(e,t){this.tempo=e,this.notes=t,this.voices_by_start=new Map;let n=0;t.forEach((([e,t])=>t.forEach((t=>t.forEach((t=>{let r=_t(t),i=rt(e,r),s=n,o=this.tempo_bm_s(e,i);this.voices_by_start.set(s,{start:s,note:t,d_bm:i,d_s:o}),n+=i}))))))}voice(e){return this.voices_by_start.get(e)}}class vt{get sub_beat(){return this.bm%this.beat_quanti}get beat(){return Math.floor(this.bm%this.measure_quanti/this.beat_quanti)}get measure(){return Math.floor(this.bm/this.measure_quanti)}get beat_quanti(){return 8}get measure_quanti(){return this.nb_beats*this.beat_quanti}get nb_beats(){return tt(this.time_signature)}get note_value(){return nt(this.time_signature)}constructor(e){this.time_signature=e}bm=0;increment(){return this.bm++,this}}class yt{keys=new Map;constructor(e){this.voices=e}get all(){return[...this.keys]}get all_keys(){return[...this.keys.values()]}zero(e){return this.keys.get(e)||[]}actives(e,t){return this.all.flatMap((([n,r])=>{let i=t-n;if(i<=0)return[];let s=(o=i,nt(e)-Math.log(o/8)/Math.log(2));var o;let a=r.map((e=>Xe(pt(e),s)));return 1===a.length&&(a=a[0]),[[n,a]]}))}push(e,t){this.keys.has(t)||this.keys.set(t,[]);let n=this.keys.get(t);if(n.includes(e))return this.keys.delete(t),[t,n];n.push(e),n.length>1&&n.shift()}release(e){for(let[t,n]of this.keys)this.keys.set(t,n.filter((t=>t!==e)))}release_previous(e){let t=[];for(let n of this.keys.keys())n<e&&(t.push([n,this.keys.get(n)]),this.keys.delete(n));return t}release_all(){let e=[...this.keys];return this.keys=new Map,e}}function _t(e){return Array.isArray(e)?Qe(e[0]):Ue(e)?Qe(e):e}var wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function xt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kt={},St={};Object.defineProperty(St,"__esModule",{value:!0});var Nt={};!function(e){function t(e){return e[1]}function n(e){return function(t){return{tpe:e,value:t}}}Object.defineProperty(e,"__esModule",{value:!0}),e.mmap=e.mrplus=e.mr=e.mseq3=e.mseq3Separator=e.msecond=e.meither=e.mstar=e.mOpt=e.mgroup=e.mlookahead=e.mrec=e.mpass=e.noneMatcherNode=e.oneMatcherNode=e.fLast=e.fSecond=e.fId=void 0,e.fId=function(e){return e},e.fSecond=t,e.fLast=function(e){return e[2]},e.oneMatcherNode=n,e.noneMatcherNode=n("none")("");function r(e){return i(e,t)}function i(e,t){return function(n){let r=[];for(let t of e){let e=t(n);if(!e)return;let{acc:i,rest:s}=e;n=s,r.push(i)}if(3===r.length)return{rest:n,acc:t(r)}}}e.mpass=function(t){return{rest:t,acc:e.noneMatcherNode}},e.mrec=function(e){return function(t){return e()(t)}},e.mlookahead=function(t){return function(n){if(n.match(t))return{rest:n,acc:e.noneMatcherNode}}},e.mgroup=function(e,t){return function(n){let r=e(n);if(r)return{rest:r.rest,acc:t(r.acc)}}},e.mOpt=function(t){return function(n){let r=t(n);return r||{rest:n,acc:e.noneMatcherNode}}},e.mstar=function(e){return function(t){let n=[],r=e;for(;;){let e=r(t);if(!e)break;let{acc:i,rest:s}=e;if(t===s)break;if(t=s,n.push(i),0===t.length)break}let i=[];return n.forEach((e=>{"string"!=typeof e&&(i=i.concat(e))})),0===n.length?void 0:{rest:t,acc:i}}},e.meither=function(e){return function(t){for(let n of e){let e=n(t);if(e)return e}}},e.msecond=r,e.mseq3Separator=function(t,n,s){let[o,a,l]=n;return i([r([e.mpass,o,t]),r([e.mpass,a,t]),l],s)},e.mseq3=i,e.mr=function(e,t){let r=n(t);return function(t){let n=t.match(e);if(n){let[e,i,s]=n;if(t!==s)return{rest:s,acc:r(i)}}}},e.mrplus=function(e,t,n){return function(r){let i=r.match(e);if(i){let[e,...s]=i,o=s.slice(0,t),a=s[t];if(r!==a)return{rest:a,acc:n(o)}}}},e.mmap=function(e,t){let r=n(t);return function(t){let n=e.find((e=>t.startsWith(e)));if(n){return{rest:t.slice(n.length),acc:r(n)}}}}}(Nt);var At={},Ct=wt&&wt.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Mt=wt&&wt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$t=wt&&wt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Ct(t,e,n);return Mt(t,e),t};Object.defineProperty(At,"__esModule",{value:!0}),At.fSecond=At.fReduceOneAndThree=At.fOneAndThree=At.fFirstAndThird=At.fSliceTriple=At.fAll=At.fFirst=At.fLast=At.fLastTwo=At.fFirstTwo=void 0;const Tt=$t(Nt);At.fFirstTwo=e=>qt(e,0,2);At.fLastTwo=e=>qt(e,1,3);At.fLast=e=>qt(e,2,3);At.fFirst=e=>qt(e,0,1);function qt(e,t,n){return function(r){return Tt.oneMatcherNode(e)(r.slice(t,n))}}function Ot(e){return function(t){let[n,r,i]=t;return Tt.oneMatcherNode(e)([n,i])}}At.fAll=e=>qt(e,0,3),At.fSliceTriple=qt,At.fFirstAndThird=Ot,At.fOneAndThree=Ot,At.fReduceOneAndThree=Ot,At.fSecond=function(e){return function(t){let[n,r,i]=t;return Tt.oneMatcherNode(e)(r)}};var jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.default=class{constructor(e,t){this.leafRefs=e,this.branchRefs=t}mrLeaf(e,t){var n,r;return null===(r=(n=this.leafRefs)[e.tpe])||void 0===r?void 0:r.call(n,t)}mrBranch(e,t){var n,r;return null===(r=(n=this.branchRefs)[e.tpe])||void 0===r?void 0:r.call(n,t)}reducer(e,t,n){let r=n.filter(Boolean);if("root"===t)return r[0];if("string"==typeof t){if("string"==typeof e);else if(!Array.isArray(e))return this.mrLeaf(e,t)}else{if(!Array.isArray(t))return r[0];if("string"==typeof e){if("rootroot"===e)return r}else if(!Array.isArray(e))return this.mrBranch(e,r)}}};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.makeNarrower=Pt.wrapBranch=Pt.wrapSingleBranch=Pt.makeId=Pt.wrapLeaf=void 0,Pt.wrapLeaf=function(e){return t=>({[e]:t})},Pt.makeId=function(e){return e},Pt.wrapSingleBranch=function(e){return e[0]},Pt.wrapBranch=function(e){return t=>({[e]:t})},Pt.makeNarrower=function(e){return t=>e in t};var Et={},Ft={};function Bt(e,t){return Dt(e,e.value,((e,n,r)=>t(n,r)))}function Dt(e,t,n){let{value:r}=e,i=e.children.flatMap((e=>Dt(e,r,n)));return n(t,r,i)}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.reducePlus=Ft.reduce=Ft.filter=Ft.addChild=Ft.node=void 0,Ft.node=function(e){return{value:e,children:[]}},Ft.addChild=function(e,t){e.children.push(t)},Ft.filter=function(e,t){return Bt(e,((e,n)=>{let r=n.flat();return t(e)&&r.push(e),r}))},Ft.reduce=Bt,Ft.reducePlus=Dt,Object.defineProperty(Et,"__esModule",{value:!0}),Et.toNode=Et.fOfType=Et.fMatchNode=Et.maybeOneMatcherNode=Et.addOneMatcherToNode=void 0;const Lt=Ft;function zt(e,t){let n=Lt.node(t);return Array.isArray(t)?t.map((e=>zt(n,e))):"string"==typeof t||zt(n,t.value),Lt.addChild(e,n),e}function It(e){if("string"==typeof e);else if(!Array.isArray(e))return e}function Gt(e){return zt(Lt.node("root"),e)}Et.addOneMatcherToNode=zt,Et.maybeOneMatcherNode=It,Et.fMatchNode=function(e){return t=>{let n=It(t);return!!n&&e(n)}},Et.fOfType=function(e){return function(t){return t.tpe===e}},Et.toNode=Gt,Et.default=function(e){return Gt(e)},function(e){var t=wt&&wt.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=wt&&wt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=wt&&wt.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.toNode=e.model=e.NodeToModel=e.rr=e.mm=e.tt=void 0,e.tt=r(St),e.mm=r(Nt),e.rr=r(At);var s=jt;Object.defineProperty(e,"NodeToModel",{enumerable:!0,get:function(){return i(s).default}}),e.model=r(Pt);var o=Et;Object.defineProperty(e,"toNode",{enumerable:!0,get:function(){return o.toNode}});const a=i(Et),l=Ft;e.default=function(e,t){let n=a.default(e.acc);return l.reducePlus(n,"rootroot",t)}}(kt);var Rt=xt(kt);const Vt=kt.mm.mr(/^( +)(.*)$/s,"space"),Zt=kt.mm.mr(/^( )(.*)$/s,"newline"),Ut=kt.mm.mr(/^(\r?\n)(.*)$/s,"newline"),Ht=kt.mm.mr(/^(\/)(.*)$/s,"slash"),Xt=kt.mm.mr(/^([a-zA-Z]+)(.*)$/s,"word"),Kt=kt.mm.mr(/^([a-zA-Z0-9\/]+)(.*)$/s,"word"),Wt=kt.mm.mr(/^([a-z|A-Z|0-9| ]+)(.*)$/s,"word"),Yt=kt.mm.mr(/^(\")(.*)$/s,"quote"),Qt=kt.mm.mr(/^(\<)(.*)$/s,"quote"),Jt=kt.mm.mr(/^(\>)(.*)$/s,"quote"),en=kt.mm.mr(/^([r])(.*)$/s,"r"),tn=kt.mm.mr(/^([abcdefg])(.*)$/s,"pitch"),nn=kt.mm.mr(/^([\'])(.*)$/s,"octave"),rn=kt.mm.mr(/^([\,])(.*)$/s,"octave_down"),sn=kt.mm.mr(/^([ie]s)(.*)$/s,"accidental"),on=kt.mm.mr(/^(\~)(.*)$/s,"tie"),an=kt.mm.mr(/^(\|)(.*)$/s,"bar"),ln=kt.mm.mr(/^(\|\|)(.*)$/s,"dbar"),cn=kt.mm.mr(/^(\.)(.*)$/s,"dot"),un=kt.mm.mr(/^([1248])(.*)$/s,"duration_number"),dn=kt.mm.mr(/^(16)(.*)$/s,"duration_number"),hn=kt.mm.mr(/^(\<\<)(.*)$/s,"dot"),fn=kt.mm.mr(/^(\>\>)(.*)$/s,"dot"),mn=kt.mm.mr(/^(\/new GrandStaff)(.*)$/s,"grandstaffbegin"),pn=kt.mm.mseq3([Yt,Wt,Yt],kt.rr.fSecond("text")),gn=kt.mm.mseq3([kt.mm.meither([dn,un]),kt.mm.mpass,kt.mm.mOpt(cn)],kt.rr.fOneAndThree("duration")),bn=kt.mm.mseq3([en,kt.mm.mpass,gn],kt.rr.fOneAndThree("restduration")),vn=kt.mm.mseq3([tn,kt.mm.mseq3([kt.mm.mOpt(sn),kt.mm.mOpt(sn),kt.mm.mOpt(kt.mm.mgroup(kt.mm.mstar(kt.mm.meither([nn,rn])),kt.mm.oneMatcherNode("octaves")))],kt.rr.fAll("accidentals_octave")),kt.mm.mseq3([kt.mm.mOpt(kt.mm.meither([gn,pn])),kt.mm.mpass,kt.mm.mOpt(on)],kt.rr.fOneAndThree("duration_ties"))],kt.rr.fAll("wPO")),yn=kt.mm.meither([bn,vn]),_n=kt.mm.mstar(kt.mm.meither([yn,Zt])),wn=kt.mm.mstar(kt.mm.meither([yn,ln,an,Zt])),xn=kt.mm.mseq3([Qt,_n,Jt],kt.rr.fSecond("chord")),kn=kt.mm.mgroup(kt.mm.mseq3([kt.mm.mOpt(Vt),kt.mm.mseq3([Ht,Xt,kt.mm.mseq3([Zt,Kt,kt.mm.mpass],kt.mm.fSecond)],(e=>e.slice(1))),kt.mm.mOpt(Vt)],kt.mm.fSecond),kt.mm.oneMatcherNode("command")),Sn=kt.mm.mstar(kt.mm.meither([wn,xn])),Nn=kt.mm.mseq3([kt.mm.mr(/^(\{)(.*)$/s,"sbegin"),kt.mm.mstar(kt.mm.meither([Ut,kn,Sn])),kt.mm.mr(/^(\})(.*)$/s,"send")],kt.rr.fSecond("staff")),An=kt.mm.mgroup(kt.mm.mstar(kt.mm.meither([Nn,Zt,Ut])),kt.mm.oneMatcherNode("staffs")),Cn=kt.mm.mOpt(kt.mm.mstar(kt.mm.meither([Zt,Ut]))),Mn=kt.mm.mseq3([mn,kt.mm.mpass,kt.mm.mseq3([kt.mm.mseq3([Cn,hn,Cn],(e=>1)),An,kt.mm.mseq3([Cn,fn,kt.mm.mpass],(e=>1))],(e=>e[1]))],kt.rr.fLast("grandstaff")),$n=kt.mm.meither([Mn,An]),Tn=[],qn=["staffs","octave","pitch","clef","duration_number","dot","duration","text","word","accidental","tie","bar","dbar","restduration"];function On(e,t={duration:"4"}){return e.flatMap((e=>"grandstaff"in e?{grandstaff:On(e.grandstaff,t)}:"staffs"in e?{staffs:e.staffs.map((e=>function(e,t){let{staff:n}=e,r=n.flatMap((e=>"command"in e?[jn(e)]:"dbar"in e?e.dbar:"bar"in e?e.bar:"restduration"in e?function(e,t){let{restduration:n}=e;if(n){let e=n.find((e=>"duration"in e)),t=e?.duration,r=t?.find((e=>e.duration_number))?.duration_number;return{rest:r}}}(e):"wPO"in e?Pn(e,t):"chord"in e?[e.chord.map((e=>Pn(e,t)))]:[]));return{notes:r}}(e,t)))}:void 0))[0]}function jn(e){let{command:t}=e;return t.map((e=>e.word))}function Pn(e,t){let{wPO:n}=e;if(n){let e,r,i=n.find((e=>"pitch"in e)),s=n.find((e=>"accidentals_octave"in e)),o=n.find((e=>"duration_ties"in e)),a=s?.accidentals_octave.find((e=>"octaves"in e)),l=s?.accidentals_octave.filter((e=>"accidental"in e)),c=o?.duration_ties.find((e=>"text"in e)),u=o?.duration_ties.find((e=>"duration"in e)),d=o?.duration_ties.find((e=>"tie"in e));if(i&&(e=i.pitch,r=a?.octaves.length||0),c){let t=c.text.map((e=>e.word)).join("");return{pitch:e,octave:r,text:t}}{let n=u?.duration,i=n?.find((e=>e.duration_number))?.duration_number,s=n?.find((e=>e.dot))?.dot,o=l?.map((e=>e.accidental)).join(""),a=d?.tie;return i?t.duration=i:i=t.duration,e?{pitch:e,octave:r,duration:i,dot:s,accidental:o,tie:a}:{duration:i,dot:s}}}}function En(e,t){return{[e.tpe]:t}}function Fn(e,t,n){let r=n.filter(Boolean);return"rootroot"===e?r:"string"!=typeof t?Array.isArray(t)?"string"==typeof e||Array.isArray(e)?r:En(e,r):"string"==typeof e||Array.isArray(e)?r[0]:En(e,r):"string"!=typeof e?Array.isArray(e)?r:function(e,t){if(!Tn.includes(e.tpe))return qn.includes(e.tpe)?{[e.tpe]:t}:void 0}(e,t):void 0}function Bn(e){let t=$n(e);if(t)return On(Rt(t,Fn))}function Dn(e){return Array.isArray(e)?`<${e.map(Ln)}>`:"object"==typeof e&&e.text?Ln(e):Ue(e)?Vn(e):`r${Gn[e]}`}function Ln(e){return"object"==typeof e&&e.text?`"${e.text}"`:Vn(e)}const zn=["","c","d","e","f","g","a","b"],In=[",,,",",,",",","","'","''","'''","''''"],Gn=["","","1","2","4","8","16","32","64","128"],Rn=["","is","es","isis","eses"];function Vn(e){let t=We(e),n=Ye(e),r=Qe(e),i=Je(e);return[zn[t],In[n],Gn[r],Rn[i]].join("")}function Zn(e,t){return 8*Math.pow(2,nt(e)-t)}const Un=(e,t)=>e+t,Hn=["0","1","2","3","4","5","6","7","8","9","10","11","12"];const Xn=["0","0","1","2","4","8","16","32","64"];const Kn=["treble","bass"];function Wn(e){let[t,n]=e.split("/");return et(function(e){return Hn.indexOf(e)}(t),function(e){return Xn.indexOf(e)}(n))}let Yn=["c","d","e","f","g","a","b"],Qn=[3,4,5,6],Jn=[void 0,void 0,"1","2","4","8","16","32"],er=["is","es","isis","eses"];function tr(e){return"rest"in e?function(e){let{rest:t}=e,n=Jn.indexOf(t);if(n>0)return n}(e):function(e){let{pitch:t,octave:n,dot:r,duration:i,text:s,accidental:o,tie:a}=e,l=Yn.indexOf(t)+1,c=Qn[n],u=Jn.indexOf(i),d=er.indexOf(o)+1||void 0;return s?{pitch:l,octave:c,text:s}:l>0?c?Ke(l,c,d,u):void 0:u}(e)}function nr(e){let t=Bn(e);if(!t)return;let{staffs:n,grandstaff:r}=t;return r?{grandstaff:r.staffs.map(rr)}:n?n.map(rr):void 0}function rr(e){let t,n,{notes:r}=e,i=[];if(r.flatMap((e=>{if(Array.isArray(e)){let[r,s]=e;"clef"===r?t=function(e){let t=Kn.indexOf(e)+1;if(t>0)return t}(s):"time"===r?(n=n||Wn(s),i.push({time:Wn(s)})):i.push(e.map(tr))}else"|"===e||"||"===e?i.push(e):i.push(tr(e))})),n){let e=new ur,t=0,n=0;return i.forEach((r=>{if("string"==typeof r)"||"===r&&(n=(t+1)*e.beats_per_measure*8);else if(Array.isArray(r)||"number"==typeof r){e.add_cnr(n,r);let t=e.last.note_length_in_subs(r);n+=t}else r.time&&e.add_time(r.time)})),e}{let e=new hr;return i.forEach((t=>{e.add_cnr(t)})),{clef:t,no_time:e.notes}}}function ir(e){let t=e[0][0],n=new lr(t,1);return e.forEach((([e,t])=>{0!==t.length?t.forEach(((r,i)=>{n.add(r,e,void 0,i===t.length-1)})):n.add([],e,void 0,!0)})),n}let sr=[0,4,2,1,1,1,1,1,1];function or(e,t){let n=t?.25:0;if(!e[0])return n;let r=_t(e[0]);return e.length*sr[r]+n}class ar{get width(){return this.notes.map((e=>e.width)).reduce(Un,0)}get nb_subs(){return this.notes.map((e=>e.notes.map((e=>Zn(this.time_signature,_t(e)))).reduce(Un,0))).reduce(Un,0)}get max_subs(){return Zn(this.time_signature,nt(this.time_signature))*tt(this.time_signature)}get left_subs(){return this.max_subs-this.nb_subs}constructor(e,t){this.time_signature=e,this.clef=t,this.notes=[]}maybe_add(e,t){let n=e.map((e=>Zn(this.time_signature,_t(e)))).reduce(Un,0);return this.left_subs>=n&&(this.notes.push({x:this.width,width:or(e,t),notes:e,dbar:t,bm_duration:n}),!0)}}class lr{get last(){return this.data[this.data.length-1]}get lines(){let e,t,n=[],r=[],i=0;return this.data.forEach((s=>{let o=s.clef!==t,a=s.time_signature!==e;t=s.clef,e=s.time_signature;let l=i,c=s.width+(o?.25:0)+(a?2.25:0);if(r.push({x:l,width:c,show_clef:o,show_time:a,measure:s}),i+c>18)return n.push(r),r=[],void(i=0);i+=c})),r.length>0&&n.push(r),n}constructor(e,t){this.time_signature=e,this.clef=t,this.data=[new ar(e,t)]}add(e,t,n,r){let i=!1;void 0!==n&&this.last.clef!==n&&(i=!0),void 0!==t&&this.last.time_signature!==t&&(i=!0),i||(i=!this.last.maybe_add(e,r)),i&&(this.data.push(new ar(t||this.last.time_signature,n||this.last.clef)),this.last.maybe_add(e,r))}}function cr(e,t,n){if(0===t.length)return!0;if(He(t[0])||He(n))return!1;let r=_t(t[0]),i=_t(n);return!(t.map(_t).reduce(Un,0)>=e)&&r===i}class ur{data=[];get fen(){return this.data.map((e=>e.fen)).join("\n")}get notes(){return this.data.map((e=>[e.time_signature,e.notes]))}get last(){return this.data[this.data.length-1]}seek_composer(e){let t=0;return[this.data.find((n=>{if(t+n.nb_subs>=e)return!0;t+=n.nb_subs})),t]}del_beat(e){let[t,n]=this.seek_composer(e);if(t)return t.del_beat(e-n)}dup_beat(e){let[t,n]=this.seek_composer(e);t&&t.dup_beat(e-n)}add_cnr(e,t){let[n,r]=this.seek_composer(e);n?n.add_cnr(e-r,t):(this.add_measure(),this.add_cnr(e,t))}add_time(e){this.data.push(new dr(e))}add_measure(e){this.last&&this.last.time_signature===e||this.data.push(new dr(e||this.last.time_signature)),this.last.add_measure()}}class dr{get fen(){return["{","/clef treble",(e=this.time_signature,`/time ${tt(e)}/${Gn[nt(e)]}`),this.data.map((e=>Dn(e))).join(" "),"}"].join("\n");var e}get dots(){let e=[...Array(this.beats_per_measure)].flatMap((e=>[...Array(this.note_length_in_subs(this.note_value))].map((e=>"-")))).join(""),t=0;return this.data.forEach((n=>{let r=_t(n),i=this.note_length_in_subs(n);e=function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)}(e,t,`${r}`),t+=i})),e}get notes(){let e=[],t=[];for(let n=0;n<this.data.length;n++){let r=this.data[n];cr(this.note_value,t,r)?t.push(r):(e.push(t),t=[r])}return t.length>0&&e.push(t),e}get beats_per_measure(){return tt(this.time_signature)}get note_value(){return nt(this.time_signature)}get sub_note_values(){return[...Array(4).keys()].map((e=>this.note_value+e))}get nb_subs(){return this.data.reduce(((e,t)=>this.note_length_in_subs(t)+e),0)}constructor(e){this.time_signature=e,this.data=[]}note_length_in_subs(e){let t=_t(e);return 8*Math.pow(2,this.note_value-t)}scan_notes(e,t){let n,r,i,s,o=0;for(let a=0;a<this.data.length;a++){let l=this.note_length_in_subs(this.data[a]);if(void 0===n&&o<=e&&e<o+l){if(n=a,i=e-o,o+i<=e+t&&e+t<=o+l){r=a,s=o+l-(e+t);break}}else if(void 0!==n&&o<=e+t&&e+t<=o+l){r=a,s=o+l-(e+t);break}o+=l}return[n,i,r,s]}subs_to_fill(e){return this.sub_note_values.flatMap((t=>{let n=this.note_length_in_subs(t),r=Math.floor(e/n);return e-=r*n,0===r?[]:[...Array(r)].map((e=>t))}))}del_beat(e){let t=this.note_length_in_subs(this.note_value),n=Math.floor(e/t)*t,r=this.scan_notes(n,t);if(r){let[e,t,n,i]=r;if(void 0===e||void 0===n)return;let s=this.data.slice(e,n+1).map(_t).map((e=>rt(this.time_signature,e))).reduce(Un,0),o=this.subs_to_fill(s);return this.data.splice(e,n-e+1,...o),!0}return!1}dup_beat(e){let t=this.note_length_in_subs(this.note_value),n=Math.floor(e/t)*t,r=this.scan_notes(n,t);if(r){let[e,t,n,i]=r;if(void 0===e||void 0===n)return;let s=this.data.slice(e,e+n+1);this.data.splice(e,0,...s)}}add_cnr(e,t){let n=this.note_length_in_subs(t),r=this.scan_notes(e,n);if(r){let[n,i,s,o]=r;if(void 0===n||void 0===s)return this.add_measure(),void this.add_cnr(e,t);let a=this.subs_to_fill(o),l=this.subs_to_fill(i);this.data.splice(n,s-n+1,...l,t,...a)}}add_measure(){this.data=[...this.data,...[...Array(this.beats_per_measure)].map((e=>this.note_value))]}}class hr{data=[];get notes(){return this.data}add_cnr(e){this.data.push(e)}}const fr=le('<div class="m-wrap"></div>'),mr=le("<staff> <lines> <line></line> <line></line> <line></line> <line></line> <line></line> </lines></staff>"),pr=le("<span></span>"),gr=le('<span><span class="text"></span></span>'),br=le('<span class="ledger"></span>'),vr=le('<div class="playback"><div class="measure"><span> m.</span><span> beat</span><span> sub</span></div><span class="cursor"></span></div>'),yr=le('<span class="bar"></span>'),_r=le('<span class="text"></span>'),wr=le('<div class="notes-duration-wrap"><table><thead><tr><th>Name</th><th>Note</th><th>Rest</th><th colspan="2">Equivalents</th></tr></thead><tbody><tr> <td>Double Whole Note</td><td> <!> </td><td> <!> </td><td>Two Whole Notes</td><td></td></tr><tr> <td>Whole Note</td><td> <!> </td><td> <!> </td><td>Two Half Notes</td><td></td></tr><tr> <td>Half Note</td><td> <!> </td><td> <!> </td><td>Two Quarter Notes</td><td></td></tr><tr> <td>Quarter Note</td><td> <!> </td><td> <!> </td><td>Two Eighth Notes</td><td></td></tr><tr> <td>Eighth Note</td><td> <!> </td><td> <!> </td><td>Two Sixteenth Notes</td><td></td></tr><tr> <td>Sixteenth Note</td><td> <!> </td><td> <!> </td><td>Two Thirty-second Notes</td><td></td></tr><tr> <td>Thirty-second Note</td><td> <!> </td><td> <!> </td><td>Two Sixty-fourth Notes</td><td></td></tr></tbody></table></div>'),xr=le("<lines><line></line><line></line><line></line><line></line><line></line></lines>"),kr=le('<div class="free-staff"></div>'),Sr=le('<div class="p-wrap"><div class="background"></div></div>'),Nr=le('<span class="letter"></span>'),Ar=le('<span class="active black"></span>'),Cr=le('<span class="active white"></span>'),Mr=le("<div></div>");function $r(e,t){return.25*(7*(4-t)+7-e)/2}let Tr=["gclef","bclef"];let qr=[5,9];const Or=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];const jr=["zero","zero","one","two","four","eight","sixth"];let Pr=[void 0,"double","whole","half","quarter","quarter","quarter","quarter"],Er=[void 0,"eighth","sixteenth","thirtysecond","sixtyfourth"],Fr=[void 0,void 0,void 0,1,1,2,3,4],Br=[void 0,void 0,void 0,void 0,void 0,1,2,3,4],Dr=[void 0,"double","whole","half","quarter","eighth","sixteenth","thirtysecond","sixtyfourth"];const Lr=e=>{let{fen:t}=e;if(t){let e=nr(t),n=e;return Array.isArray(e)&&e[0]instanceof ur&&(n=e.map((e=>ir(e.notes)))),I(zr,{composer:n})}return I(zr,{})},zr=e=>(()=>{const t=fr.cloneNode(!0);return fe(t,I(U,{get each(){return e.composer},children:t=>I(K,{get fallback(){return I(U,{get each(){return t?.lines},children:t=>I(Gr,{get playback(){return e.playback},get playback_pos(){return e.playback_pos},get active_notes(){return e.active_notes},get zero_notes(){return e.zero_notes},line:t})})},get children(){return I(W,{get when(){return t.no_time},get children(){return I(Ir,{get clef(){return t.clef},get no_time(){return t.no_time}})}})}})})),t})(),Ir=e=>(()=>{const t=mr.cloneNode(!0);return t.firstChild.nextSibling,fe(t,I(X,{get when(){return e.clef},get children(){return I(Ur,{x:.25,get clef(){return e.clef}})}}),null),fe(t,I(U,{get each(){return e.no_time},children:(e,t)=>I(K,{get fallback(){return I(Hr,{get x(){return 2+1.5*t()},klass:"free",note:e})},get children(){return[I(W,{get when(){return Array.isArray(e)},get children(){return I(U,{each:e,children:e=>I(Hr,{get x(){return 2+1.5*t()},get klass(){return["free","chord"].join(" ")},note:e})})}}),I(W,{get when(){return He(e)},get children(){return I(Jr,{get x(){return 2+1.5*t()},klass:"free",rest:e})}})]}})}),null),t})(),Gr=e=>(()=>{const t=mr.cloneNode(!0);return t.firstChild.nextSibling,fe(t,I(X,{get when(){return e.playback},get children(){return I(ei,{get playback_pos(){return e.playback_pos},get playback(){return e.playback}})}}),null),fe(t,I(U,{get each(){return e.zero_notes},children:t=>I(Kr,{get pitch(){return t[0]},get octave(){return t[1]},get playback_pos(){return e.playback_pos}})}),null),fe(t,I(U,{get each(){return e.line},children:e=>I(Rr,{lined_measure:e})}),null),t})(),Rr=e=>{let{lined_measure:{show_clef:t,show_time:n,measure:r,x:i}}=e,s=t?i+.25:i,o=n?s+1:s,a=o+.75,l=a+r.width;return[I(X,{when:t,get children(){return I(Ur,{x:s,get clef(){return r.clef}})}}),I(X,{when:n,get children(){return I(Vr,{x:o,get time_signature(){return r.time_signature}})}}),I(U,{get each(){return r.notes},children:(e,t)=>I(Zr,{ox:a,group:e,get i(){return t()}})}),I(ti,{ox:l})]},Vr=e=>{let{x:t,time_signature:n}=e,r=$r(2,5),i=$r(5,4),s={transform:`translate(${t+(tt(n)>=10?-.25:0)}em, ${r}em)`},o={transform:`translate(${t}em, ${i}em)`};return[(()=>{const e=pr.cloneNode(!0);return he(e,s),fe(e,(()=>{return Re[(e=tt(n),Or[e]+"_time")];var e})),e})(),(()=>{const e=pr.cloneNode(!0);return he(e,o),fe(e,(()=>{return Re[(e=nt(n),jr[e]+"_time")];var e})),e})()]},Zr=e=>{let{group:{bar:t,dbar:n,notes:r,width:i,x:s},i:o,ox:a}=e,l=`group-${o}`,c=i/(r.length+1),u=s+a;return[I(X,{when:t,get children(){return I(ti,{ox:u-.5})}}),I(U,{each:r,children:(e,t)=>I(K,{get fallback(){return I(Hr,{get x(){return u+c*t()},klass:l,note:e})},get children(){return[I(W,{get when(){return Array.isArray(e)},get children(){return I(U,{each:e,children:e=>I(Hr,{get x(){return u+c*t()},get klass(){return[l,"chord"].join(" ")},note:e})})}}),I(W,{get when(){return He(e)},get children(){return I(Jr,{get x(){return u+c*t()},klass:l,rest:e})}})]}})}),I(X,{when:n,get children(){return I(ni,{ox:u+i})}})]},Ur=e=>{let{klass:t,x:n,clef:r}=e,i=$r(function(e){return qr[e-1]}(r),4),s={transform:`translate(${n}em, ${i}em) translateZ(0)`},o=function(e){return Tr[e-1]}(r);return(()=>{const e=pr.cloneNode(!0);return e.className=t,he(e,s),fe(e,(()=>Re[o])),e})()},Hr=e=>{let{note:t,x:n,klass:r}=e;return I(K,{get fallback(){return I(Xr,{x:n,klass:r,note:t})},get children(){return I(W,{when:"number"==typeof t,get children(){return I(Wr,{x:n,klass:r,note:t})}})}})},Xr=e=>{let{note:t,x:n,klass:r}=e,{text:i,pitch:s,octave:o}=t,a={transform:`translate(${n}em, ${$r(s,o)}em) translateZ(0)`};return(()=>{const e=gr.cloneNode(!0),t=e.firstChild;return he(e,a),fe(t,i),p((()=>e.className=[r].join(" "))),e})()},Kr=e=>{let{pitch:t,octave:n,klass:r,playback_pos:i}=e,s={transform:`translate(${i}em, ${$r(t,n)}em) translateZ(0)`};return r=[r||"","zero-note"].join(" "),(()=>{const e=pr.cloneNode(!0);return e.className=r,he(e,s),fe(e,(()=>Re.quarter_note)),e})()},Wr=e=>{let{x:t,note:n,klass:r}=e,i=We(n),s=Ye(n),o=Qe(n),a=Je(n),l=$r(i,s),c=-1*Math.sign(0===l?-1:l),u=Fr[o]*c,d=Br[o],h=oi(i,s).map((e=>$r(...e))),f=Pr[o];r=["note",f,r||""].join(" ");let m=Re[f+"_note"],g={transform:`translate(${t}em, ${l}em) translateZ(0)`};return[(()=>{const e=pr.cloneNode(!0);return e.className=r,he(e,g),fe(e,m),e})(),I(H,{each:h,children:e=>(()=>{const n=br.cloneNode(!0);return p((r=>he(n,ri(t,e()),r))),n})()}),I(X,{when:a,get children(){return I(Qr,{klass:r,pitch:i,octave:s,x:t,accidental:a})}}),I(X,{when:u,get children(){return I(li,{get klass(){return n.klass},pitch:i,octave:s,ox:t,stem:u})}}),I(X,{when:d,get children(){return I(Yr,{get klass(){return n.klass},pitch:i,octave:s,ox:t,flag:d,stem:u})}})]},Yr=e=>{let{klass:t,pitch:n,octave:r,ox:i,flag:s,stem:o}=e,a=$r(n,r),l=Math.sign(o),c={transform:`translate(${i+(-1===l?.25:0)}em, ${a+l}em)`},u=Er[s]+"_flag_"+(-1===l?"up":"down");return(()=>{const e=pr.cloneNode(!0);return he(e,c),fe(e,(()=>Re[u])),p((()=>e.className=["flag",t].join(" "))),e})()},Qr=e=>{let{klass:t,pitch:n,octave:r,x:i,accidental:s}=e,o=$r(n,r),a=ri(i-di[s],o);return(()=>{const e=pr.cloneNode(!0);return e.className=t,he(e,a),fe(e,(()=>Re[ui[s]+"_accidental"])),e})()},Jr=e=>{let{x:t,rest:n}=e,r=$r(7,4),i=Dr[n],s=["rest",i].join(" "),o=Re[i+"_rest"],a={transform:`translate(${t}em, ${r}em) translateZ(0)`};return(()=>{const e=pr.cloneNode(!0);return e.className=s,he(e,a),fe(e,o),e})()},ei=e=>(()=>{const t=vr.cloneNode(!0),n=t.firstChild.firstChild,r=n.firstChild,i=n.nextSibling,s=i.firstChild,o=i.nextSibling,a=o.firstChild;return fe(n,(()=>e.playback.measure+1),r),fe(i,(()=>e.playback.beat+1),s),fe(o,(()=>e.playback.sub_beat+1),a),p((n=>he(t,{transform:`translate(calc(${e.playback_pos}em), 0)`},n))),t})(),ti=e=>{let{i:t,ox:n}=e,r={transform:`translate(${n||0}em, -50%) translateZ(0)`};return(()=>{const e=yr.cloneNode(!0);return he(e,r),e})()},ni=e=>{let{ox:t}=e;return[I(ti,{ox:t+0}),I(ti,{ox:t+.1})]};function ri(e,t){return{transform:`translate(${e}em, ${t}em) translateZ(0)`}}let ii=[void 0,[],[6,4,2],[6,4],[6,4],[6],[6],[]],si=[void 0,[1],[1],[1,3],[1,3],[1,3,5],[1,3,5],[1,3,5,7]];function oi(e,t){return 4===t&&1===e?[[1,4]]:3===t?[[1,4],...ii[e].map((e=>[e,3]))]:5===t&&e>5?[[6,5]]:6===t?[[6,5],...si[e].map((e=>[e,6]))]:[]}const ai=e=>{let{note:t,i:n}=e,{pitch:r,octave:i}=t;r||(r=7,i=4);let s=2*(n+1),o=t.ledger?oi(t.pitch,t.octave).map((e=>$r(...e))):[];return[I(fi,{get klass(){return t.klass},pitch:r,octave:i,ox:s,get oy(){return t.text?-.125:0},get children(){return oe((()=>!!t.code),!0)()?Re[t.code]:(()=>{const e=_r.cloneNode(!0);return fe(e,(()=>t.text)),e})()}}),I(H,{each:o,children:e=>(()=>{const t=br.cloneNode(!0);return p((n=>he(t,ri(s,e()),n))),t})()}),I(X,{get when(){return t.accidental},get children(){return I(hi,{get klass(){return t.klass},pitch:r,octave:i,ox:s,get accidental(){return t.accidental}})}}),I(X,{get when(){return t.dot},get children(){return I(ci,{get klass(){return t.klass},pitch:r,octave:i,ox:s})}}),I(X,{get when(){return t.stem},get children(){return I(li,{get klass(){return t.klass},pitch:r,octave:i,ox:s,get stem(){return t.stem}})}}),I(X,{get when(){return t.flag},get children(){return I(Yr,{get klass(){return t.klass},pitch:r,octave:i,ox:s,get flag(){return t.flag},get stem(){return t.stem}})}})]},li=e=>{let{klass:t,pitch:n,octave:r,ox:i,stem:s}=e,o=ri(i,$r(n,r)),a=-1===Math.sign(s)?"up":"down";return(()=>{const e=pr.cloneNode(!0);return he(e,o),p((()=>e.className=["stem",a,t].join(" "))),e})()},ci=e=>{let{klass:t,pitch:n,octave:r,ox:i}=e,s=ri(i,$r(n,r));return(()=>{const e=pr.cloneNode(!0);return he(e,s),p((()=>e.className=["dot",t].join(""))),e})()},ui=[void 0,"sharp","flat","dsharp","dflat"],di=[0,.25,.25,.3,.4],hi=e=>{let{klass:t,pitch:n,octave:r,ox:i,accidental:s}=e,o=$r(n,r),a=ri(i-di[s],o);return(()=>{const e=pr.cloneNode(!0);return e.className=t,he(e,a),fe(e,(()=>Re[ui[s]+"_accidental"])),e})()},fi=e=>{let{klass:t,children:n,pitch:r,octave:i,ox:s,oy:o}=e,a={transform:`translate(${s||0}em, ${$r(r,i)+(o||0)}em) translateZ(0)`};return(()=>{const e=pr.cloneNode(!0);return e.className=t,he(e,a),fe(e,n),e})()},mi=e=>(()=>{const e=wr.cloneNode(!0),t=e.firstChild.firstChild.nextSibling.firstChild,n=t.firstChild.nextSibling.nextSibling,r=n.firstChild.nextSibling;r.nextSibling;const i=n.nextSibling,s=i.firstChild.nextSibling;s.nextSibling;const o=i.nextSibling.nextSibling,a=t.nextSibling,l=a.firstChild.nextSibling.nextSibling,c=l.firstChild.nextSibling;c.nextSibling;const u=l.nextSibling,d=u.firstChild.nextSibling;d.nextSibling;const h=u.nextSibling.nextSibling,f=a.nextSibling,m=f.firstChild.nextSibling.nextSibling,p=m.firstChild.nextSibling;p.nextSibling;const g=m.nextSibling,b=g.firstChild.nextSibling;b.nextSibling;const v=g.nextSibling.nextSibling,y=f.nextSibling,_=y.firstChild.nextSibling.nextSibling,w=_.firstChild.nextSibling;w.nextSibling;const x=_.nextSibling,k=x.firstChild.nextSibling;k.nextSibling;const S=x.nextSibling.nextSibling,N=y.nextSibling,A=N.firstChild.nextSibling.nextSibling,C=A.firstChild.nextSibling;C.nextSibling;const M=A.nextSibling,$=M.firstChild.nextSibling;$.nextSibling;const T=N.nextSibling,q=T.firstChild.nextSibling.nextSibling,O=q.firstChild.nextSibling;O.nextSibling;const j=q.nextSibling,P=j.firstChild.nextSibling;P.nextSibling;const E=T.nextSibling.firstChild.nextSibling.nextSibling,F=E.firstChild.nextSibling;F.nextSibling;const B=E.nextSibling,D=B.firstChild.nextSibling;return D.nextSibling,fe(n,I(pi,{duration:1}),r),fe(i,I(pi,{rest:!0,duration:1,ox:.4}),s),fe(o,I(pi,{duration:2,ox:.1}),null),fe(o,I(pi,{duration:2,ox:.6}),null),fe(l,I(pi,{duration:2}),c),fe(u,I(pi,{rest:!0,duration:2,ox:.4}),d),fe(h,I(pi,{duration:3,ox:.1}),null),fe(h,I(pi,{duration:3,ox:.6}),null),fe(m,I(pi,{duration:3}),p),fe(g,I(pi,{rest:!0,duration:3,ox:.4}),b),fe(v,I(pi,{duration:4,ox:.1}),null),fe(v,I(pi,{duration:4,ox:.6}),null),fe(_,I(pi,{duration:4}),w),fe(x,I(pi,{rest:!0,duration:4,ox:.4}),k),fe(S,I(pi,{duration:5,ox:.1}),null),fe(S,I(pi,{duration:5,ox:.6}),null),fe(A,I(pi,{duration:5}),C),fe(M,I(pi,{rest:!0,duration:5,ox:.4}),$),fe(q,I(pi,{duration:6}),O),fe(j,I(pi,{rest:!0,duration:6,ox:.4}),P),fe(E,I(pi,{duration:7}),F),fe(B,I(pi,{rest:!0,duration:7,ox:.4}),D),e})(),pi=e=>{let{rest:t,duration:n,ox:r}=e;r=void 0===r?.2:r;let i=t?void 0:-1*Fr[n],s=i?Br[n]:void 0,o={code:t?Dr[n]+"_rest":Pr[n]+"_note",pitch:t?2:6,octave:t?7:6,klass:[t?"rest":"note",Dr[n]].join(" "),duration:n,stem:i,flag:s};return(()=>{const e=kr.cloneNode(!0);return fe(e,I(X,{when:!!t,get children(){return xr.cloneNode(!0)}}),null),fe(e,I(ai,{note:o,i:-1+r}),null),e})()};let gi=["C","D","E","F","G","A","B"];const bi=e=>{let{n:t,ref:n}=e,r={width:`calc(${t} * 4em * 203/125)`},i=[...Array(t)].flatMap((()=>gi));return(()=>{const s=Sr.cloneNode(!0),o=s.firstChild;return"function"==typeof n?n(s):n=s,he(o,r),fe(s,I(H,{each:i,children:(e,n)=>(()=>{const r=Nr.cloneNode(!0);return fe(r,e),p((e=>he(r,function(e){return{transform:`translate(calc((${t} * 4em * 203/125) * ${e/(7*t)}), calc(2.5em))`}}(n),e))),r})()}),null),fe(s,I(X,{get when(){return!!e.piano},get children(){return I(U,{get each(){return[...e.piano.all]},children:([n,r])=>I(U,{each:r,children:n=>I(K,{get fallback(){return(()=>{const e=Cr.cloneNode(!0);return p((r=>{return he(e,(i=ft(n),{width:"calc(4em * 203/125 / 7)",height:"3.9em",transform:`translate(calc((${t} * 4em * 203/125) * ${i/(7*t)}), calc(0em))`}),r);var i})),e})()},get children(){return I(W,{get when(){return mt(n)},get children(){const t=Ar.cloneNode(!0);return p((r=>he(t,function(t){let[n,r]=e.key_xys,[i,s,o,a]=n[t];return{width:"calc(0.8 * 4em * 203/125 / 7)",height:"calc(4em * 0.58)",transform:`translate(${i}px, ${s}px)`}}(ht(n)),r))),t}})}})})})}}),null),s})()},vi=e=>(()=>{const t=Mr.cloneNode(!0);return fe(t,(()=>e.children)),p((n=>{const r=["zoom",e.klass].join(" "),i=`font-size: ${e.zoom}em`;return r!==n._v$&&(t.className=n._v$=r),n._v$2=he(t,i,n._v$2),n}),{_v$:void 0,_v$2:void 0}),t})(),yi=le('<div class="learn"><div class="content"></div></div>'),_i=le('<div class="table-of-contents"><div class="contents"></div><h2> <span>Table Of</span>Contents</h2><div><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3><h3> Material is not reviewed and is inaccurate. </h3></div></div>'),wi=le('<h2 class="title"></h2>'),xi=le("<section><h3></h3></section>"),ki=le("<p> This project is a tribute to <strong>lichess.org</strong> and many thanks to it's main contributors. </p>"),Si=le("<p><strong>Lasolsido</strong> started as a hobby project, while learning about music. Most resources about music is not even behind ads but heavy paywalls. To every humble game developer, who want's to access this kind of resources, this is completely, and forever will be free. </p>"),Ni=le('<p>Lasolsido is under MIT License, and open source. <a href="https://github.com/eguneys/solsido">Github</a></p>'),Ai=le('<p>Though donations are appreciated &lt;3. <a href="https://www.patreon.com/eguneys">Patreon</a> </p>'),Ci=le("<ul><li> </li><li> </li><li> </li><li> </li></ul>"),Mi=le("<p> </p>"),$i=le("<p></p>"),Ti=le("<p>Pitches are referred to by the seven letters of the alphabet <strong>A B C D E F G</strong>.</p>"),qi=le("<p>Each key on a keyboard corresponds with a different pitch. The lowest pitch is on the far left, and each key to the right plays a successively higher pitch.</p>"),Oi=le("<p>. The curved line terminates at the second line designating the line as note G.</p>"),ji=le("<p>Together the treble and bass staves make a <strong>grand staff</strong>.</p>"),Pi=le('<p>The lines of the treble clef from bottom to top are <strong>E G B D and F</strong> or "Every Good Boy Deserves Fruit". The spaces from bottom to top are <strong>F A C and E</strong> or "F A C E".</p>'),Ei=le("<p>Pitches that go beyond the limits of the staff are written by adding <strong>ledger lines</strong> above or below the staff.</p>"),Fi=le("<ul><li></li><li></li><li></li><li></li></ul>"),Bi=le("<small>The notion of step is discussed later.</small>"),Di=le("<p>There are two useful intervals <strong>octave and semitone</strong>.</p>"),Li=le("<p>There are eight white keys between and including two pitches an octave apart.</p>"),zi=le("<p>The pattern of black and white keys repeats every octave on the keyboard. An octave is equal to 12 semitones (If you play all successive pitches between and including two pitches an octave apart, you would play 12 keys on the keyboard). Pitches an octave apart sound similar.</p>"),Ii=le("<p>The black keys on the keyboard, are named according to the adjacent white keys. Accidentals are used to indicate this adjacency. For example, black key between A and B can be referred to as A sharp or B flat.</p>"),Gi=le("<p>Sharps and flats are not exclusive to black keys. C is enharmonically equivalent to a B sharp, or E is enharmonically equivalent to an F flat.</p>"),Ri=le("<p>Accidentals apply to all other noteheads appearing on that line or space for the remainder of the measure, unless otherwise indicated. A natural accidental is used to cancel this convention.</p>"),Vi=le("<p><small>Accidentals are closely related to key signatures that is discussed later. </small></p>"),Zi=le("<h3>Duration, Meter and, Rhythm</h3>"),Ui=le("<p> Meter is regularly recurring pulses of equal duration, grouped in patterns of two, three, four etc. One of the pulses is accented, or strong. Pattern of strong and weak pulses are called <strong>beats</strong>. Duple (two beats) and triple (three beats) meter are two basic meters.</p>"),Hi=le("<p> <small>More on this later.</small></p>"),Xi=le("<p>Steady beats of a meter form <strong>measures</strong>, while rhythm can be any length.</p>"),Ki=le('<p>Each group of a meter is a <strong>measure or a bar</strong>. Vertical lines are <strong>measure lines or bar lines</strong>. Each measure is abbreviated as "m." and measures is abbreviated as "mm.".</p>'),Wi=le("<p>Music may start with a partial measure, called an <strong>anacrusis</strong>. It is not counted in the measure numbering.</p>"),Yi=le("<p>One whole note lasts as long as two half notes. One half note lasts as long as two quarter notes etc.</p>"),Qi=le("<p>Symbols for quarter notes and eight notes differ by addition of the <strong>flag</strong> attached to the stem of the eight note. Shorter durations can be written by adding more flags to the stem. Each additional flag divides the previous duration in half.</p>"),Ji=le("<p>Notes with flags are sometimes connected by <strong>beams</strong>. For clarifying the meter of the piece, and easier reading. Note that different durations can be beamed together as well.</p>"),es=le("<p>To express wider variety of rhthms, for example half a note followed by three quarter notes, we can use <strong>dots and ties</strong></p>"),ts=le("<p>A dotted quarter note is equal to a regular quarter note plus an eight note. Rests can be dotted as well. </p>"),ns=le("<p>Ties can be confused with <strong>slurs</strong>. <!> Rests cannot be tied.</p>"),rs=le("<p> A meter that puts beats in groups of two is <strong>duple meter</strong> or in groups of three is <strong>triple meter</strong> and in groups of four is <strong>quadruple meter</strong>.</p>"),is=le("<p>A beat can also be divided. Each quarter note beat can be divided into two eight notes. Meters that divide the beat into twos are called <strong>simple meters</strong>. Meters that divide the beat into threes are called <strong>compound meters</strong>.</p>"),ss=le("<p>For example a measure is divided in two beats thus duple meter, and each beat is divided into two, thus simple meter, or <strong>simple duple meter</strong>. A measure divided in two beats thus simple, each beat is divided into three thus compound, is <strong>simple compound meter</strong>.</p>"),os=le("<p>Some music may start with an incomplete or partial measure, that is called anacrusis or <strong>pickup measure</strong>.</p>"),as=le("<p>The meter may change in between measures, new meter is indicated by a new time signature.</p>"),ls=le('<p>Any time signature where the top number is 2, 3, or 4 is a <strong>simple meter</strong>. For simple meters, top number indicates the number of beats per measure (duple, triple, or quadruple), and bottom number indicates the beat value. In a time signature of 3/4, 3 indicates that there are three beats per measure, and 4 indicates that each beat is the length of a quarter note.<span class="bravura"></span> is a time signature shorthand for 4/4 or <strong>common time</strong>.<span class="bravura"></span> is a time signature shorthand for 2/2 or <strong>cut time</strong>.</p>'),cs=le("<p>For <strong>compound meters</strong> beat is divided into three equal durations. Each beat is a dotted note. The upper numbers are usually 6, 9 and, 12. In a time signature of 6/8, 8 indicates each beat is equal to a dotted quarter note, each measure has six eight notes, each beat is divided into three eight notes that is a dotted quarter note. To find the number of beats per measure, divide the top number by three. Thus 6/8 is duple meter, 9/8 is triple meter, 12/8 is quadruple meter. Since the bottom number indicates the duration of the beat division, add three of the bottom number to get the beat duration. In case of 6/8, the beat duration is three of eight notes which add up to a dotted quarter note. The beat duration (or unit) of a compound meter is always a dotted note.</p>"),us=le("<p>It can be a <strong>triplet or a duplet</strong>. A triplet represents, a ryhthmic borrowing from, (or a temporary shift to) the compound meter. A duplet is rythmic borrowing from the simple meter. For example in 3/4, beat can be divided into two eight notes. In 9/8, each beat can be divided into three eight notes. In 3/4, a triplet squeeze three eight notes into a beat as if it was 9/8. A duplet alters the ryhthm so that two notes take up the space that would normally accomodate three.</p>"),ds=le('<ul><li><a href="https://milnepublishing.geneseo.edu/fundamentals-function-form/">Fundamentals, Function, and Form - Theory and Analysis of Tonal Western Art Music by Andre Mount</a></li><li><span>Music in Theory and Practice Volume 1 10th Edition by Bruce Benward</span></li><li><span>The Complete Musician An Integrated Approach to Theory, Analysis, and Listening Fourth Edition by Steven G. Laitz</span></li><li><a href="https://www.youtube.com/watch?v=ICDPWP6HUbk&list=PLw9t0oA3fHkxx1PgYpiXrMUPXaOiwh6KU">Dr. B Music Theory Lesson Youtube Playlist</a></li></ul>'),hs=le('<p class="subtitle"></p>'),fs=le("<strong></strong>"),ms=le("<section><h2></h2></section>"),ps=()=>{let[e]=Te();return(()=>{const t=yi.cloneNode(!0),n=t.firstChild;return fe(t,I(gs,{}),n),fe(n,I(ke,{get component(){return ws[e()]}})),t})()},gs=()=>(()=>{const e=_i.cloneNode(!0),t=e.firstChild;return fe(t,I(bs,{i:1,title:"Preface",children:"Audience, Highlights"}),null),fe(t,I(bs,{i:2,title:"Introduction",children:"Sound, Notation"}),null),fe(t,I(bs,{i:"A",title:"References",children:"Books, Videos"}),null),e})(),bs=e=>{let{i:t,title:n,children:r}=e;return(()=>{const e=xi.cloneNode(!0);return fe(e.firstChild,t),fe(e,I(je,{get href(){return"learn/"+n.toLowerCase()},get children(){return[(()=>{const e=wi.cloneNode(!0);return ue(e,"title",n),fe(e,n),e})(),r]}}),null),e})()},vs=()=>I(Ss,{title:"Sound",children:(()=>{const e=Ci.cloneNode(!0),t=e.firstChild;t.firstChild;const n=t.nextSibling;n.firstChild;const r=n.nextSibling;r.firstChild;const i=r.nextSibling;return i.firstChild,fe(t,I(ks,{title:"Pitch",children:"highness or lowness of the sound, determined by frequency."})),fe(n,I(ks,{title:"Intensity",children:"loudness of the sound, determined by amplitude, measured in decibels."})),fe(r,I(ks,{title:"Duration",children:"length of time a pitch is sounded."})),fe(i,I(ks,{title:"Timbre",children:"quality or color of the sound, different instruments have different timbre."})),e})()}),ys=()=>I(Ss,{title:"Notation",get children(){return[(()=>{const e=Mi.cloneNode(!0);return e.firstChild,fe(e,I(ks,{title:"The staff",children:"is five equally spaced horizontal lines."})),e})(),I(_s,{zoom:"3"}),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"Pitches",children:"are represented as symbols positioned on the staff."})),e})(),Ti.cloneNode(!0),I(bi,{n:3}),qi.cloneNode(!0),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"A clef",children:"is a symbol placed at the beginning of the staff. It assigns one of the lines or spaces on a staff to a specific pitch."})),e})(),(()=>{const e=Oi.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Treble clef or G clef",children:"symbol is a stylized G placed above middle C"}),t),e})(),I(_s,{zoom:"3",fen:'{\n/clef treble\ng\'"G" <a\'"A" f\'"F"> <b\'"B" e\'"E"> <c\'\'"C" d\'"D"> d\'\'"D" e\'\'"E" f\'\'"F" g\'\'"G" \n}'}),I(xs,{children:" Different note pitches are placed on a G clef staff "}),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"Bass clef or F clef",children:"symbol is a stylized F. The dots are placed above and below the fourth line of staff, designating the line as an F."})),e})(),I(_s,{zoom:"2",fen:"{\n/clef bass\n}"}),I(xs,{children:" Bass clef notes are placed different than treble clef. (To be implemented) "}),ji.cloneNode(!0),Pi.cloneNode(!0),I(_s,{zoom:"2",fen:'/new GrandStaff <<\n{\n/clef treble\n<g\'1 d"G"> <f\'1 d"F"> <e\'1 d"E"> <d\'1 d"D"> <c\'1 d"C" c\'\'\'"Middle C">\n}\n{\n/clef bass\n<d\'\'1 d"F"> <e\'\'1 d"G"> <f\'\'1 d"A"> <g\'\'1 d"B"> <a\'\'1 d"C" e\'\'\'"Middle C">\n}\n>>'}),I(xs,{children:" Notes go from Bass Cleff to Treble Cleff on a Grand Staff "}),Ei.cloneNode(!0),I(_s,{zoom:"2",fen:'{\n/clef treble\n<c\'1 c"C"> <b1 c"B"> <a1 c"A"> <g1 c"G"> <f1 c"F"> <a\'\'1 a"A"> <b\'\'1 a"B"> <c\'\'\'1 a"C"> <d\'\'\'1 a"D"> <e\'\'\'1 a"E">\n}'}),I(xs,{children:" Notes with ledger lines "}),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"Accidentals",children:"are symbols that are placed to the left of the noteheads to indicate raising or lowering the pitch."})),e})(),(()=>{const e=Fi.cloneNode(!0),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling;return fe(t,I(ks,{title:"Sharp",children:"raises the pitch a half step."})),fe(n,I(ks,{title:"Flat",children:"lowers the pitch a half step."})),fe(r,I(ks,{title:"Natural",children:"cancels any previous sharp or flat and returns to the natural, unaltered pitch."})),fe(i,I(ks,{title:"Double sharp, or double flat",children:"raises or lowers the pitch two half steps."})),e})(),Bi.cloneNode(!0),I(_s,{zoom:"2",fen:'{\n/clef treble\n<gis\'1 g"G Sharp"> || <ges\'1 g"G Flat"> || <gisis\'1 g"G Double Sharp"> || <geses\'1 g"G Double Flat">\n}'}),I(xs,{children:"A note can have sharps, flats or natural"}),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"An interval",children:"is the distance between two pitches."})),e})(),Di.cloneNode(!0),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"An Octave",children:"is the interval between a pitch and the next pitch above or below it with the same name."})),e})(),Li.cloneNode(!0),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"A semitone",children:"is the interval between adjacent keys on the keyboard."})),e})(),zi.cloneNode(!0),Ii.cloneNode(!0),I(_s,{zoom:"2",fen:"{\n/clef treble\nc'1 cis' d' dis' e' f' fis' g' gis' a' ais' b' c''\n}"}),I(xs,{children:"An octave of notes, increasing by a semitone."}),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"Enharmonically equivalent",children:"names are when two different names refer to the same pitch."})),e})(),Gi.cloneNode(!0),I(_s,{zoom:"2",fen:"{\n/clef treble\ncis'1 des' aes' gis' ais' bes' ees'' dis'' eis' f' bis' c'' bis' deses''\n}"}),I(xs,{children:"Note that enharmonically equivalent notes sound the same."}),Ri.cloneNode(!0),Vi.cloneNode(!0),Zi.cloneNode(!0),(()=>{const e=Ui.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Meter and rhythm",children:"are patterns of duration."}),t),e})(),Hi.cloneNode(!0),(()=>{const e=Xi.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Rhythm",children:"is pattern of uneven durations."}),t),e})(),Ki.cloneNode(!0),Wi.cloneNode(!0),I(mi,{}),I(xs,{children:"The notation of duration for notes and rests"}),Yi.cloneNode(!0),Qi.cloneNode(!0),Ji.cloneNode(!0),es.cloneNode(!0),(()=>{const e=$i.cloneNode(!0);return fe(e,I(ks,{title:"A tie",children:"is a curved line that connects two adjacent notes, with the same pitch, that sounds as single sound duration of both note values."})),e})(),I(_s,{zoom:"2",fen:"{\n/clef treble\nc''~ c''4 | c''2\n}"}),I(xs,{children:"Tied quarter notes are equal to the half note"}),(()=>{const e=ts.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"A dot",children:"is placed right of a note head. It lengthens the value of the note by half of it's note value."}),t),fe(e,I(ks,{title:"A double dotted note",children:"the second dot adds half of the value added by the first note."}),null),e})(),I(_s,{zoom:"2",fen:"{\n/clef treble\na'2. | a'2~ a'4\n}"}),I(xs,{children:"Tied quarter notes are equal to the half note"}),(()=>{const e=ns.cloneNode(!0),t=e.firstChild.nextSibling.nextSibling.nextSibling;return t.nextSibling,fe(e,I(ks,{title:"A slur",children:"is similar to a tie except it connects different pitches."}),t),e})(),(()=>{const e=rs.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Meter",children:"is how beats are organized."}),t),e})(),is.cloneNode(!0),ss.cloneNode(!0),os.cloneNode(!0),(()=>{const e=as.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Time signature",children:"is pair of large numbers at the beginning of the first line of staff. They indicate the meter of the music."}),t),e})(),I(_s,{zoom:"2",fen:"{\n/clef treble\n/time 2/2 \n|| \n/time 3/2 \n|| \n/time 4/2 \n|| \n/time 3/4 \n|| \n/time 4/4 \n|| \n/time 6/8 \n|| \n/time 9/8 \n|| \n/time 12/8 \n}"}),I(xs,{children:" Time signatures with 6 simple meter and 3 compound meter. "}),(()=>{const e=ls.cloneNode(!0),t=e.firstChild.nextSibling.nextSibling.nextSibling,n=t.nextSibling.nextSibling.nextSibling.nextSibling;return fe(t,(()=>Re.common_time)),fe(n,(()=>Re.cut_time)),e})(),I(_s,{zoom:"2",fen:'{\n/clef treble\n/time 3/4\n<b\' b\'\'"Beats" f"1"> <b\' f"2"> <b\' f"3"> | <b\'8 b\'\'"Beats divided" f"1"> b\'8 <b\'8 f"2"> b\'8 <b\'16 b\'\'"Beats subdivided" f"3"> b\'16 b\'16 b\'16\n\n} {\n/clef treble\n/time 3/2\n<b\'2 b\'\'"Beats" f"1"> <b\'2 f"2"> <b\'2 f"3"> | <b\'4 b\'\'"Beats divided" f"1"> b\'4 <b\'4 f"2"> b\'4 <b\'8 f"3"> b\'8 b\'8 b\'8\n} {\n/clef treble\n/time 4/4\n<b\'4 b\'\'"Beats" f"1"> <b\'4 f"2"> <b\'4 f"3"> <b\'4 f"4"> | <b\'8 b\'\'"Beats divided" f"1"> b\'8 <b\'8 f"2"> b\'8 <b\'16 f"3"> b\'16 b\'16 b\'16 <b\'16 f"4"> b\'16 b\'16 b\'16\n} {\n/clef treble\n/time 4/2\n<b\'2 b\'\'"Beats" f"1"> <b\'2 f"2"> <b\'2 f"3"> <b\'2 f"4"> | <b\'4 b\'\'"Beats divided" f"1"> b\'4 <b\'4 f"2"> b\'4 <b\'8 f"3"> b\'8 b\'8 b\'8 <b\'8 f"4"> b\'8 b\'8 b\'8\n}\n'}),I(xs,{children:" First measure, a full note for each beat, and next measure, beats are divided and further subdivided "}),cs.cloneNode(!0),(()=>{const e=us.cloneNode(!0),t=e.firstChild;return fe(e,I(ks,{title:"Tuplets",children:"is a generic term for rhythmic alteration."}),t),e})()]}}),_s=e=>I(vi,{get zoom(){return e.zoom},get children(){return I(Lr,{get fen(){return e.fen}})}}),ws=[void 0,void 0,void 0,void 0,void 0,()=>I(Ss,{class:"preface",title:"Preface",get children(){return[ki.cloneNode(!0),Si.cloneNode(!0),Ni.cloneNode(!0),Ai.cloneNode(!0)]}}),()=>[I(vs,{}),I(ys,{})],()=>I(Ss,{title:"References",children:ds.cloneNode(!0)})],xs=e=>(()=>{const t=hs.cloneNode(!0);return fe(t,(()=>e.children)),t})(),ks=e=>[" ",(()=>{const t=fs.cloneNode(!0);return fe(t,(()=>e.title)),t})()," ",oe((()=>e.children))," "],Ss=e=>(()=>{const t=ms.cloneNode(!0);return fe(t.firstChild,(()=>e.title)),fe(t,(()=>e.children),null),t})(),Ns=(e,t,n)=>{let[r,i,s,o]=e;return r<=t&&t<r+s&&i<=n&&n<i+o},As=le("<div></div>"),Cs=le('<div><strong></strong><div class="values"></div></div>'),Ms=le('<div><span class="name"></span><span class="value"> </span><input type="range"></div>');function $s(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}const Ts=["touchstart","mousedown"],qs=["touchend","mouseup"],Os=(e,t)=>{let[n,r]=m(e,{equals:!1}),[i,s]=m(t,{equals:!1});return[[n,i],{setAttack(e){r((t=>(t.a=parseFloat(e),t)))},setDecay(e){r((t=>(t.d=parseFloat(e),t)))},setSustain(e){r((t=>(t.s=parseFloat(e),t)))},setRelease(e){r((t=>(t.r=parseFloat(e),t)))}}]},js=e=>{let{setAttack:t,setDecay:n,setSustain:r,setRelease:i}=e,s=["envelope",e.name.toLowerCase()].join(" ");return(()=>{const o=As.cloneNode(!0);return o.className=s,fe(o,I(Ps,{get name(){return e.name},klass:"vertical",get children(){return[I(Es,{name:"attack",get range(){return e.range.a},get unit(){return e.unit},get value(){return e.envelope.a},setValue:t}),I(Es,{name:"decay",get range(){return e.range.d},get unit(){return e.unit},get value(){return e.envelope.d},setValue:n}),I(Es,{name:"sustain",get range(){return e.range.s},get unit(){return e.unit_s},get value(){return e.envelope.s},setValue:r}),I(Es,{name:"release",get range(){return e.range.r},get unit(){return e.unit},get value(){return e.envelope.r},setValue:i})]}})),o})()},Ps=e=>{let t=["group",e.klass].join(" ");return(()=>{const n=Cs.cloneNode(!0),r=n.firstChild,i=r.nextSibling;return n.className=t,fe(r,(()=>e.name)),fe(i,(()=>e.children)),n})()},Es=e=>{let{klass:t,name:n,range:r,setValue:i}=e;return(()=>{const r=Ms.cloneNode(!0),s=r.firstChild,o=s.nextSibling,a=o.firstChild,l=o.nextSibling;return fe(s,n),fe(o,(()=>e.value),a),fe(o,(()=>e.unit),null),l.$$input=e=>i(e.target.value),ue(l,"orient",t),p((n=>{const i=["knob",t].join(" "),s=e.value,o=e.range[0],a=e.range[1],c=e.range[2];return i!==n._v$&&(r.className=n._v$=i),s!==n._v$2&&(l.value=n._v$2=s),o!==n._v$3&&ue(l,"min",n._v$3=o),a!==n._v$4&&ue(l,"max",n._v$4=a),c!==n._v$5&&ue(l,"step",n._v$5=c),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r})()},Fs=e=>{let t,{press:n,release:r,piano:i}=e,[s,o]=m(),a=()=>{let e=s();if(!e)return[[],[]];let{width:t,height:n}=e,r=[0,1,3,4,5],i=[...Array(28).keys()],o=t/28,a=.6*n,l=.6*o,c=.8*o,u=7*o;return[[0,1,2,3].flatMap((e=>r.map((t=>[u*e+l+t*o,0,c,a])))),i.map((e=>[0+e*o,0,o,n]))]};var l;return l=()=>{o(t.getBoundingClientRect());let e=[];const i=e=>{let t=(e=>e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.targetTouches?.[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0)(e),r=s();n(((e,t,n)=>{let r=e[0]-t.left,i=e[1]-t.top,[s,o]=n,a=s.findIndex((e=>Ns(e,r,i)));return a>=0?ut(a):dt(o.findIndex((e=>Ns(e,r,i))))})(t,r,a()))};Ts.forEach((n=>e.push($s(t,n,i,{capture:!0}))));const l=e=>{r()};qs.forEach((t=>e.push($s(document,t,l))));const c=()=>o(t.getBoundingClientRect());e.push($s(document,"scroll",c,{capture:!0,passive:!0})),e.push($s(window,"resize",c,{passive:!0})),_((()=>e.forEach((e=>e()))))},g((()=>v(l))),I(bi,{ref(e){"function"==typeof t?t(e):t=e},get piano(){return i()},get key_xys(){return a()},n:4})};function Bs(e,t,n,r){return{a:e,d:t,s:n,r:r}}ce(["input"]);const Ds=[1,1.5,2,2.5,3,4,4.5,5,5.5,6,6.5,7];function Ls(e){let t=Ye(e),n=We(e);1===Je(e)&&(n+=.5);let r=Ds.indexOf(n);return r+=12*t,440*Math.pow(2,(r-57)/12)}function zs(e,t,{a:n,d:r,s:i,r:s},o,a){n/=1e3,r/=1e3,e.setValueAtTime(o,t),e.linearRampToValueAtTime(a,t+n),e.linearRampToValueAtTime(i,t+n+r)}function Is(e,t,{r:n},r){n/=1e3,e.cancelScheduledValues(t),e.linearRampToValueAtTime(r,t+(n||0))}class Gs{get context(){return this._context||(this._context=new AudioContext),this._context}get currentTime(){return this.context.currentTime}_gen_id=0;get next_id(){return++this._gen_id}players=new Map;constructor(e){this.synth=e}attack(e,t=0){let{next_id:n,synth:r}=this;return this.players.set(n,new Rs(this.context)._set_data({synth:r,freq:Ls(e)}).attack(t)),n}release(e,t=0){let n=this.players.get(e);n&&n.release(t),this.players.delete(e)}}class Rs extends class{get maxFilterFreq(){return this.context.sampleRate/2}constructor(e){this.context=e}attack(e=this.context.currentTime){let{context:t}=this;return this.gain=t.createGain(),this.analyser=t.createAnalyser(),this.gain.gain.setValueAtTime(1,e),this.gain.connect(this.analyser),this.analyser.connect(t.destination),this._attack(e),this}release(e=this.context.currentTime){return this._release(e),this}}{_set_data(e){return this.data=e,this}_attack(e){let{context:t,maxFilterFreq:n}=this,r=this.gain,{freq:i,synth:s}=this.data,{volume:o,cutoff:a,cutoff_max:l,amplitude:c,filter_adsr:u,amp_adsr:d}=s,h=new OscillatorNode(t,{type:"sawtooth"});this.osc1=h;let f=new OscillatorNode(t,{type:"sawtooth"});this.osc2=f;let m=new GainNode(t);h.connect(m);let p=new GainNode(t);f.connect(p),m.gain.setValueAtTime(.5,e),p.gain.setValueAtTime(.5,e),f.detune.setValueAtTime(700,e);let g=new BiquadFilterNode(t,{type:"lowpass"});this.filter=g,m.connect(g),p.connect(g),r.gain.setValueAtTime(o,e);let b=new GainNode(t);this.envelope=b,g.connect(b),b.connect(r),h.frequency.setValueAtTime(i,e),f.frequency.setValueAtTime(i,e);let v={...u,s:a*n*.4+u.s*l*n*.6};zs(g.frequency,e,v,a*n*.4,a*n*.4+l*n*.6),zs(b.gain,e,d,0,.5*c),h.start(e),f.start(e)}_release(e){let{synth:{cutoff:t,amp_adsr:n,filter_adsr:r}}=this.data,{a:i,d:s,r:o}=n;i/=1e3,s/=1e3,o/=1e3,Is(this.envelope.gain,e,n,0),Is(this.filter.frequency,e,r,t*this.maxFilterFreq*.4),this.osc1.stop(e+i+s+o),this.osc2.stop(e+i+s+o)}}let Vs=["i","o","p","[","]"],Zs=["w","e","r","t","y"],Us=[" ","j","k","l",";","'","\\"],Hs=["a","s","d","f","g","h"],Xs=[...Vs,...Zs,...Us,...Hs];const Ks=new Map(Xs.map((e=>[e,Ws(e)])));function Ws(e){let t=Us.indexOf(e)+1;return t>0?lt(ot,t-1):(t=Hs.indexOf(e)+1,t>0?lt(at,t-1):(t=Vs.indexOf(e)+1,t>0?ct(it,t-1):(t=Zs.indexOf(e)+1,t>0?ct(st,t-1):void 0)))}const Ys=le('<div class="make-sound"></div>'),Qs=le('<div class="notice box-padding"><h2 class="underline">Make Sound Manual</h2><p class="red"> Piano may sound loud. </p><p class="underline">Features in Plan</p><ul><li>An interactive tutorial to teach the editor</li><li>Instrument selection on music editor</li><li>More controls</li></ul></div>'),Js=le('<div class="knobs"></div>'),eo=w(),to=()=>x(eo),no=e=>{let t={volume:.3,amplitude:.5,cutoff:.7,cutoff_max:0,amp_adsr:Bs(0,0,1,0),filter_adsr:Bs(0,0,.5,0)},n=Os(t.amp_adsr,Bs([0,2e3,70],[0,2e3,70],[0,1,.1],[0,2e3,70])),r=m(t.amplitude),i=Os(t.filter_adsr,Bs([0,2e3,70],[0,2e3,70],[0,1,.5],[0,2e3,70])),s=m(t.cutoff),o=m(t.cutoff_max),a=m(t.volume);g((()=>{t.amplitude=parseFloat(r[0]())})),g((()=>{t.cutoff=parseFloat(s[0]())})),g((()=>{t.cutoff_max=parseFloat(o[0]())})),g((()=>{t.volume=parseFloat(a[0]())}));let l=new Gs(t),[c,u]=m(new yt,{equals:!1});const d=[[n,r,i,s,o,a],[c,l],{press:e=>{u((t=>(t.push(e,0),t)))},release:e=>{u((t=>(t.release(e),t)))}}];return I(eo.Provider,{value:d,get children(){return e.children}})},ro=()=>(()=>{const e=Ys.cloneNode(!0);return fe(e,I(io,{}),null),fe(e,I(oo,{}),null),fe(e,I(so,{}),null),e})(),io=()=>Qs.cloneNode(!0),so=()=>{let e,[t]=Ie(),[[n,r],[i,s],{press:o,release:a}]=to(),l=[],c=new Map;return g((()=>{e=i().all_keys.flat();let t=e.filter((e=>!l.includes(e))),n=l.filter((t=>!e.includes(t)));t.forEach((e=>{let t=pt(e),n=s.attack(Xe(t,2),s.currentTime);c.set(e,n)})),n.forEach((e=>{let t=c.get(e);s.release(t,s.currentTime),c.delete(e)})),l=e})),_((()=>{e.forEach((e=>{let t=c.get(e);s.release(t,s.currentTime),c.delete(e)}))})),g((()=>{let e=t();Xs.forEach((t=>{let n=e.btn(t),r=e.btn0(t);n>0?0===r&&o(Ks.get(t)):0===n&&r>0&&a(Ks.get(t))}))})),I(vi,{zoom:2,get children(){return I(Fs,{piano:i,press:o,release:a})}})},oo=()=>{let[[e,t,n,r,i,s]]=to(),[[o,a],l]=e,[[c,u],d]=n,[h,f]=t,[m,p]=r,[g,b]=i,[v,y]=s;return(()=>{const e=Js.cloneNode(!0);return fe(e,I(js,Z({unit:"ms",unit_s:"n",get range(){return u()},get envelope(){return c()}},d,{name:"filter_envelope"})),null),fe(e,I(Ps,{name:"cutoff",get children(){return[I(Es,{klass:"vertical",unit:"n",range:[0,1,.1],get value(){return m()},setValue:p}),I(Es,{name:"max",klass:"vertical",unit:"n",range:[0,1,.1],get value(){return g()},setValue:b})]}}),null),fe(e,I(js,Z({unit:"ms",unit_s:"n",get range(){return a()},get envelope(){return o()}},l,{name:"amp_envelope"})),null),fe(e,I(Ps,{name:"amplitude",get children(){return I(Es,{klass:"vertical",unit:"n",range:[0,1,.1],get value(){return h()},setValue:f})}}),null),fe(e,I(Es,{name:"Volume",klass:"vertical",unit:"n",range:[0,1,.1],get value(){return v()},setValue:y}),null),e})()};const ao=le('<div class="box-padding notice"><h2 class="underline"> Make Music </h2><p class="red"> Piano may sound loud.</p><p class="red"> Not ready for production, feedback welcome </p><p> There is a manual in the <!> </p></div>'),lo=le('<div class="make-music"></div>'),co=le('<div class="dsl-editor"><p> Copy paste the dsl data below to share your music. <span></span> </p><textarea rows="16" cols="80"></textarea></div>'),uo=le('<div class="playback-controls"><span class="tempo" title="Tempo">Tempo </span><span class="play-reset" title="Play/Reset">Play</span><span class="stop" title="Stop">Stop</span></div>'),ho=le('<div class="controls"><span class="dup-beat" title="Duplicate Beat">Dup Beat</span><span class="dup-measure" title="Duplicate Measure">Dup Measure</span><span class="rel-piano" title="Cancel Piano Press">Cancel Press</span><span class="bw-beat" title="Go to Start">Go Start</span><span class="bw-beat" title="Go Backward">Backward</span><span class="fw-beat" title="Go Forward">Forward</span></div>'),fo=w(),mo=()=>x(fo),po=e=>{let t=et(4,4),[n,r]=m(new vt(t),{equals:!1}),[i,s]=m(new yt,{equals:!1}),[o,a]=m(new ur,{equals:!1}),[l,c]=m(2),u={volume:1,amplitude:.7,cutoff:.6,cutoff_max:.2,amp_adsr:Bs(20,80,.2,100),filter_adsr:Bs(0,80,.2,0)},d=new Gs(u);g((()=>{console.log(o().data,o().fen),console.log(o().notes),console.log(ir(o().notes).lines)}));const h=()=>n().bm,f=()=>t,p=()=>{a((e=>(e.add_measure(f()),e)))},b=e=>{r((t=>(0===e?t.bm=0:(t.bm+=e,t.bm=Math.max(0,t.bm)),t)))};p();const v=[[i,n,o,l],{setComposer:a,player:d,bm:h,time_signature:f,add_measure:p,playback_pos(){let e,{lines:t}=ir(o().notes),n=h(),r=0;return t.find((t=>t.find((({x:t,measure:i})=>{if(r+i.nb_subs>=n){let s=0;return i.notes.find((({x:i,notes:o,bm_duration:a})=>{if(r+s+a>=n)return e=t+i+2,!0;s+=a}))}r+=i.nb_subs})))),e},_composer:()=>[ir(o().notes)],bars:()=>o().bars,zero_notes:()=>i().zero(h()).map(pt),active_notes:()=>[],press(e){s((t=>(t.actives(f(),h()).map((([e,t])=>{console.log(t,_t(t),rt(f(),_t(t))),a((n=>(n.add_cnr(e,t),n)))})),t.push(e,h()),t.release_previous(h()),t)))},release(e){s((e=>e))},inc_tempo:e=>{c((t=>e?Math.max(1,Math.min(7,t+e)):t<7?t+1:1))},quanti:b,quanti_note(e){let t=h()+e,[n,r]=o().seek_composer(t);if(n){let[i]=n.scan_notes(t-r,1),s=n.note_length_in_subs(n.data[i]);b(s*e)}},go_beat_0(){b(0)},fw_beat(){b(1)},bw_beat(){b(-1)},rel_piano(){s((e=>(e.release_all(),e)))},del_beat(){a((e=>(e.del_beat(h())&&b(-8),e)))},dup_beat(){a((e=>(e.dup_beat(h()),e)))},dup_measure(){}}];return I(fo.Provider,{value:v,get children(){return e.children}})},go=()=>(()=>{const e=ao.cloneNode(!0),t=e.firstChild.nextSibling.nextSibling.nextSibling,n=t.firstChild.nextSibling;return n.nextSibling,fe(t,I(Oe,{href:"/",anchor:"manual",children:"home page"}),n),e})(),bo=()=>{let[[e,t,n],{player:r,bm:i,inc_tempo:s,add_measure:o,quanti:a,quanti_note:l,del_beat:c,press:u,release:d}]=mo(),[h]=Ie();return g(y(h,(e=>{e.btnp("Backspace")&&c(),e.btnp("left")?l(-1):e.btnp("right")&&l(1);e.btnp("0")?a(0):e.btnp("1")?a(1):e.btnp("2")?a(2):e.btnp("4")&&a(4),e.btnp("!",!0)?a(-1):e.btnp("@",!0)?a(-2):e.btnp("$",!0)&&a(-4),e.btnp("+")?s(1):e.btnp("-")&&s(-1)}))),(()=>{const t=lo.cloneNode(!0);return fe(t,I(go,{}),null),fe(t,I(xo,{}),null),fe(t,I(wo,{}),null),fe(t,I(vi,{zoom:2,get children(){return I(_o,{player:r,piano:e,press:u,release:d})}}),null),fe(t,I(vo,{}),null),t})()},vo=()=>{let[[e,t,n,r],{setComposer:i}]=mo(),s=!1;const o=e=>{let t=nr(e?.clipboardData?.getData("Text")||e.target.value);t&&(s=!0,i((e=>t[0])),s=!1)};let a;g((()=>{n(),s||(a.value=n().fen)}));let[l,c]=m("Copy");const u=()=>{a.focus(),a.select(),document.execCommand("copy"),c("Copied!"),setTimeout((()=>{c("Copy")}),1e3)};return(()=>{const e=co.cloneNode(!0),t=e.firstChild,n=t.firstChild.nextSibling,r=t.nextSibling;n.$$click=u,fe(n,l),r.addEventListener("paste",o),r.addEventListener("change",o);return"function"==typeof a?a(r):a=r,p((()=>n.className=["copy","Copied!"===l()?"active":""].join(" "))),e})()},yo=()=>{let e,[[t,n,r,i],{player:s,time_signature:o,bm:a,inc_tempo:l,quanti:c,press:u,release:d}]=mo(),[h,f]=Ie();g(y(a,(t=>{if(!e)return;let n=e.voice(t);if(n&&Ue(n.note)){let e=s.attack(n.note,s.currentTime);s.release(e,s.currentTime+n.d_s)}})));let m=0;g(y(f,(({dt:t})=>{e&&(m+=t,m>=1e3*e.tempo_bm_s(o(),1)&&(m=0,c(1)))}))),g(y(i,(t=>{e&&(e.tempo=t)})));const p=()=>{e=new bt(i(),r().notes),c(0)},b=()=>{c(0),e=void 0},v=()=>{l()};return(()=>{const e=uo.cloneNode(!0),t=e.firstChild;t.firstChild;const n=t.nextSibling,r=n.nextSibling;return t.$$click=v,fe(t,(()=>gt[i()]),null),n.$$click=p,r.$$click=b,e})()},_o=e=>{let t,{player:n,piano:r,press:i,release:s}=e,[o]=Ie(),a=[],l=new Map;return g((function(){t=r().all_keys.flat();let e=t.filter((e=>!a.includes(e))),i=a.filter((e=>!t.includes(e)));e.forEach((e=>{let t=pt(e),r=n.attack(Xe(t,2),n.currentTime);l.set(e,r)})),i.forEach((e=>{let t=l.get(e);n.release(t,n.currentTime),l.delete(e)})),a=t})),_((()=>{t.forEach((e=>{let t=l.get(e);n.release(t,n.currentTime),l.delete(e)}))})),g((()=>{let e=o();Xs.forEach((t=>{let n=e.btn(t),r=e.btn0(t);n>0?0===r&&i(Ks.get(t)):0===n&&r>0&&s(Ks.get(t))}))})),I(Fs,{piano:r,press:i,release:s})},wo=()=>{let[e,{dup_beat:t,dup_measure:n,rel_piano:r,fw_beat:i,bw_beat:s,go_beat_0:o}]=mo();return(()=>{const e=ho.cloneNode(!0),a=e.firstChild,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,d=u.nextSibling,h=d.nextSibling;return fe(e,I(yo,{}),a),de(a,"click",t,!0),de(l,"click",n,!0),de(c,"click",r,!0),de(u,"click",o,!0),de(d,"click",s,!0),de(h,"click",i,!0),e})()},xo=e=>{let[[t,n,r],{quanti:i,playback_pos:s,active_notes:o,zero_notes:a,_composer:l}]=mo();return I(vi,{zoom:3,get children(){return I(zr,{get playback(){return n()},get piano(){return t()},get playback_pos(){return s()},get composer(){return l()},get zero_notes(){return a()},get active_notes(){return o()}})}})};ce(["click"]);const ko=le('<div class="svg"><svg><path class="TieSegment" stroke="#000" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd" d="\nM 0 34 c 123 -34 495 -34 619 0 -123 -30 -495 -30 -619 0"></path></svg><svg><path class="TieSegment" stroke="#000" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd"></path></svg><svg><path class="TieSegment" stroke="#000" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd"></path></svg><svg><path class="TieSegment" stroke="#000" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd"></path></svg><svg><path class="TieSegment" stroke="#000" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" fill-rule="evenodd"></path></svg></div>');function So(e){return`M 0 ${.5*e} c ${e} -${.5*e}    ${4*e} -${.5*e}    ${5*e} 0\n                    -${e} -${.5*e-4} -${4*e} -${.5*e-4} -${5*e} 0`}var No=()=>(()=>{const e=ko.cloneNode(!0),t=e.firstChild.nextSibling,n=t.firstChild,r=t.nextSibling,i=r.firstChild,s=r.nextSibling,o=s.firstChild,a=s.nextSibling.firstChild;return p((e=>{const t=So(44),r=So(34),s=So(24),l=So(14);return t!==e._v$&&ue(n,"d",e._v$=t),r!==e._v$2&&ue(i,"d",e._v$2=r),s!==e._v$3&&ue(o,"d",e._v$3=s),l!==e._v$4&&ue(a,"d",e._v$4=l),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e})();const Ao=le('<div class="app-wrap"></div>'),Co=le('<div class="error"><section><h2> <span class="glitch" title="App crashed">App crashed. </span> <small>Returning home page in <!> seconds...</small> </h2></section></div>'),Mo=le('<span class="pop"></span>'),$o=le('<div class="home"><section><h1 class="head-one">THIS IS <span class="brand"></span> AND</h1><h1 class="head-two">IT IS ABOUT MUSIC LEARNING AND PRODUCING.</h1></section><section class="features"><div class="left"><h2> Features on Agenda </h2><ul><li> <div></div> </li><li> <div></div> </li><li> <div></div> </li><li> <div></div> </li></ul></div><div class="right"><h2> Features on Plan </h2><ul><li> <div>MIDI Support</div> </li><li> <div>Pro mode music production</div> </li><li> <div>Pro mode sound synthesis</div> </li><li> <div>Audio Visualizer</div> </li></ul></div></section><section class="extra"><p> Project is open source, you are welcome to help. <small> See </small> </p></section><section class="extra"><div id="manual" class="manual"><h2 class="underline"> Notice and Manual </h2><p class="red"> Playing the piano might sound loud, beware of your volume. If the keys stick try pressing the piano key again, or refresh the page. </p><p class="red"> The material in Learn section is not reviewed and may be inaccurate. </p><p> Although project is not near completion, and in progress, this is some manual: </p>Compose music and draw notes on the sheet by playing notes on the piano.<br>There is an orange cursor on the sheet, that shows your current location on the sheet. <br>The top indicator `1m. 1 beat 1 sub` shows your location.<br>Press a piano key to activate it. Move the cursor forward to determine the note duration. <br>The note begins at the point you press the piano, and ends at the point you release the piano.<br>Press any other key at some other point in time to release the previously active key press.<br>If you press a piano key again at the same point you activated it, it will deactivate without putting a note on the sheet.<br><h2 class="underline"> Piano Keys </h2><p> One octave of keys: <strong>Space j k l ; \' </strong> </p><p> Another octave of keys: <strong>a s d f g h</strong> </p><p> Black keys are one row up on the keyboard </p><h2 class="underline"> Buttons </h2><ul><li> <strong>Dup Beat:</strong> Duplicate the beat the cursor is on</li><li><strong>Dup Measure:</strong> Duplicate the measure the cursor is on</li><li><strong>Cancel:</strong> Cancel active piano presses</li><li><strong>Backward:</strong> Move the cursor backward one sub beat</li><li><strong>Forward:</strong> Move the cursor forward one sub beat</li></ul><h2 class="underline">Shortcuts:</h2><ul><li><strong>1:</strong> Forward one sub beat</li><li><strong>4:</strong> Forward 4 sub beats</li><li><strong>Shift + 1:</strong> Backward one sub beat</li><li><strong>Shift + 4:</strong> Backward 4 sub beats</li></ul></div></section></div>'),To=le('<div class="internal"></div>'),qo=le('<div class="main-wrap"><main></main></div>'),Oo=le('<header><div class="site-title-nav"><h1 class="site-title"> <a href="/"> lasolsido<span>.org</span></a></h1><nav><section> <!> </section><section> <!> </section><section> <!> </section><section> <!> </section></nav></div></header>'),jo=e=>{let t=Math.random()*e.length;return e.slice(t,t+4*Math.random())},Po=e=>{let{err:t,reset:n}=e,[r,i]=m(4),[s,{home:o}]=Te(),[a,l]=m([],{equals:!1});console.error(t),g((()=>{0===r()&&(n(),o())})),setInterval((()=>{i((e=>Math.max(0,e-1)))}),1e3);let c="App crashed$@%^Dont go there#*)(+_!";return setInterval((()=>{if(l((e=>(e.forEach((e=>{e.siy[1]((e=>e+Math.random()/10))})),e))),Math.random()<.7){let e=m(2*Math.random()-1),t=m(2*Math.random()-1);l((n=>{n.push({word:jo(c)+jo(c),six:e,siy:t}),n.splice(20,1);for(let e=0;e<5;e++)Math.random()<.1&&n.shift();return n}))}}),80),(()=>{const e=Co.cloneNode(!0),t=e.firstChild,n=t.firstChild.firstChild.nextSibling.nextSibling.nextSibling,i=n.firstChild.nextSibling;return i.nextSibling,fe(e,I(U,{get each(){return a()},children:e=>(()=>{const t=Mo.cloneNode(!0);return fe(t,(()=>e.word)),p((()=>t.style.setProperty("transform",`translate(${100*e.six[0]()}%, ${100*e.siy[0]()}%)`))),t})()}),t),fe(n,r,i),e})()},Eo=()=>(()=>{const e=$o.cloneNode(!0),t=e.firstChild,n=t.firstChild.firstChild.nextSibling,r=t.nextSibling,i=r.firstChild.firstChild.nextSibling.firstChild,s=i.firstChild.nextSibling,o=i.nextSibling,a=o.firstChild.nextSibling,l=o.nextSibling,c=l.firstChild.nextSibling,u=l.nextSibling.firstChild.nextSibling,d=r.nextSibling.firstChild.firstChild.nextSibling;return d.firstChild,fe(n,I(Oe,{href:"/",children:"lasolsido "})),fe(s,I(Oe,{href:"sound",children:"Sound Synthesizer"})),fe(a,I(Oe,{href:"music",children:"Music Editor"})),fe(c,I(Oe,{href:"learn",children:"Music Theory Learning Material"})),fe(u,I(Oe,{href:"learn",children:"Music, Sound, Piano Challenges"})),fe(d,I(Oe,{href:"learn/preface",children:" Preface "}),null),e})(),Fo=[Eo,Eo,()=>I(no,{get children(){return I(ro,{})}}),()=>I(po,{get children(){return I(bo,{})}}),ps,ps,ps,ps,ps],Bo=[No,No,No],Do=e=>{let[t]=Te();return(()=>{const e=qo.cloneNode(!0);return fe(e.firstChild,I(K,{get fallback(){return I(ke,{get component(){return Fo[t()]}})},get children(){return I(W,{get when(){return t()>10},get children(){const e=To.cloneNode(!0);return fe(e,I(ke,{get component(){return Bo[t()-10]}})),e}})}})),e})()},Lo=e=>(()=>{const e=Oo.cloneNode(!0),t=e.firstChild.firstChild.nextSibling.firstChild,n=t.firstChild.nextSibling;n.nextSibling;const r=t.nextSibling,i=r.firstChild.nextSibling;i.nextSibling;const s=r.nextSibling,o=s.firstChild.nextSibling;o.nextSibling;const a=s.nextSibling,l=a.firstChild.nextSibling;return l.nextSibling,fe(t,I(Oe,{href:"/",children:" Home "}),n),fe(r,I(Oe,{href:"sound",children:" Sound "}),i),fe(s,I(Oe,{href:"music",children:" Music "}),o),fe(a,I(Oe,{href:"learn/introduction",children:" Learn "}),l),e})();return function(e,t){!function(e,t,n){let r;f((i=>{r=i,t===document?e():fe(t,e(),t.firstChild?null:void 0,n)}))}(I($e,{get children(){return I(Ge,{get children(){const e=Ao.cloneNode(!0);return fe(e,I(Lo,{}),null),fe(e,I(Q,{fallback:(e,t)=>I(Po,{err:e,reset:t}),get children(){return I(Do,{})}}),null),e}})}}),e)}}();
